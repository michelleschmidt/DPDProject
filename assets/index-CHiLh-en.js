import{r as s,j as e,a as me}from"./react-DMqFHgMx.js";import{c as Te}from"./react-dom-CFJ2ijTe.js";import{N as De,L as le,B as Fe}from"./react-router-dom-CLLZjDPc.js";import{a as Pe}from"./axios-B4uVmeYG.js";import{a as oe,e as Le,f as W}from"./react-router-Cyh74n_n.js";import{S as K}from"./react-select-r5e4JcDh.js";import{D as re}from"./react-datepicker-BBJUVvyo.js";import{L as Ie,M as Me,F as Re,a as $e,I as Oe,T as de,H as ze,b as Ue,c as He,R as Be,d as Ve,e as Ge,G as qe,f as Ye,g as We,h as Ze,i as Ke,j as Je,k as Qe,B as Xe,l as es,m as ss,n as ts,o as as}from"./react-icons-DnQTOln1.js";import{u as ns,C as Z}from"./react-hook-form-BXG7Hmcd.js";import{P as ue,B as ls}from"./react-chartjs-2-Cp1vDG5d.js";import{C as rs,A as is,p as os,b as cs,c as ds,L as us,d as ms,T as xs,e as hs}from"./chart.js-21tyhvwI.js";import"./chartjs-adapter-date-fns-DdTgu1p6.js";import{A as ps,m as gs}from"./framer-motion-ClB8KmtI.js";/* empty css                  */import"./hoist-non-react-statics-Dlr-usKs.js";import"./react-is-8JwjhRSi.js";import"./scheduler-CzFDRTuY.js";import"./@remix-run-CyxMdkWl.js";import"./@babel-DzNQ87j3.js";import"./@emotion-D4rftiAa.js";import"./stylis-YPZU7XtI.js";import"./@floating-ui-D6As9zVn.js";import"./use-isomorphic-layout-effect-axN6aYaw.js";import"./clsx-B-dksMZM.js";import"./date-fns-D-P5PT-A.js";import"./react-onclickoutside-DB05OKjk.js";import"./@kurkle-BZxJdD1U.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const d of t)if(d.type==="childList")for(const o of d.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function l(t){const d={};return t.integrity&&(d.integrity=t.integrity),t.referrerPolicy&&(d.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?d.credentials="include":t.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(t){if(t.ep)return;t.ep=!0;const d=l(t);fetch(t.href,d)}})();var fs={BASE_URL:"/DPDProject/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const bs=fs.VITE_API_URL||"https://health-connect-kyp7.onrender.com",E=Pe.create({baseURL:bs,headers:{"Content-Type":"application/json"},withCredentials:!0});E.interceptors.response.use(n=>n,async n=>{var l;const a=n.config;if(((l=n.response)==null?void 0:l.status)===401&&a&&!a._retry){a._retry=!0;try{return await E.get("/api/auth/check-auth"),E(a)}catch(r){return window.location.href="/",Promise.reject(r)}}return Promise.reject(n)});const ye=s.createContext(void 0),js=({children:n})=>{const[a,l]=s.useState(!1),[r,t]=s.useState(null),d=async()=>{try{const w=await E.get("/api/auth/check-auth");return l(!0),t(w.data.user),!0}catch{return l(!1),t(null),!1}};s.useEffect(()=>{d()},[]);const o=w=>{t(w),l(!0)},S=async()=>{try{await E.post("/api/auth/logout")}catch(w){console.error("Logout request failed:",w)}t(null),l(!1)};return e.jsx(ye.Provider,{value:{isAuthenticated:a,userData:r,login:o,logout:S,checkAuth:d},children:n})},ie=()=>{const n=s.useContext(ye);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n},xe=({text:n})=>{const{logout:a}=ie(),l=oe(),r=async()=>{await a(),l("/")};return e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute inset-0 bg-gray-100 h-16 border-b-2 border-blue-200 flex items-center",children:e.jsxs("div",{className:"flex px-10 items-center justify-between w-full",children:[e.jsx("h1",{className:"text-2xl font-medium uppercase",children:n}),e.jsx("button",{onClick:r,className:"px-5 py-1 hover:bg-gray-200 hover:cursor-pointer transition duration-300 ease-in-out bg-gray-100 rounded-lg font-medium text-blue-500 text-xl",children:"Logout"})]})})})},ys=({text:n,className:a,...l})=>e.jsx("div",{...l,className:`px-5 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:cursor-pointer transition duration-200 ${a}`,children:n}),ve=()=>{const[n,a]=s.useState(""),[l,r]=s.useState(""),[t,d]=s.useState(!1),o=oe(),{login:S}=ie(),[w,k]=s.useState(null),y=s.useCallback(async()=>{if(!t){d(!0),k(null);try{const _=await E.post("/api/auth/login",{email:n,password:l},{timeout:5e3});if(_.status===201&&_.data){const b=_.data;b&&b.role?(S(b),b.role==="admin"?o("/admindashboard"):b.role==="doctor"?o("/doctordashboard"):b.role==="normal_user"?o("/patientdashboard"):k("Unknown user role")):k("Invalid user data received from server")}else k("Unexpected response from server")}catch(_){console.error("Login error:",_),_.response?k(_.response.data.message||"An error occurred during login"):_.request?k("No response from server. Please check your internet connection."):k("An error occurred. Please try again.")}finally{d(!1)}}},[n,l,t,S,o]);return e.jsxs("div",{className:"h-screen w-full",children:[e.jsx(xe,{text:""}),e.jsx("div",{className:"h-full w-full gap-8 flex bg-blue-50 flex-col items-center pt-28",children:e.jsxs("div",{className:"flex flex-col gap-8 w-[400px] h-3/5 bg-white rounded-2xl px-5 py-6 shadow-custom",children:[e.jsx("h1",{className:"text-center text-blue-600 font-semibold text-3xl",children:"Login"}),e.jsxs("div",{className:"flex flex-col gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("span",{className:"font-medium",children:"Email*"}),e.jsx("input",{type:"email",placeholder:"Email",value:n,onChange:_=>a(_.target.value),className:"input_ outline-none rounded-lg px-2 p-1"})]}),e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("span",{className:"font-medium",children:"Password*"}),e.jsx("input",{type:"password",placeholder:"********",value:l,onChange:_=>r(_.target.value),className:"input_ outline-none rounded-lg px-2 p-1"})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[t?e.jsx("div",{className:"text-center",children:"Signing in..."}):e.jsx(ys,{onClick:y,text:"Sign in",className:"text-center"}),w&&e.jsx("div",{className:"text-red-500 text-sm mt-2",children:w}),e.jsx("div",{className:"text-center text-sm",children:"If you do not have an account yet, please sign in here."})]})]})})]})},X=({element:n,requiredRoles:a})=>{const{isAuthenticated:l,userData:r}=ie();return l&&r&&a.includes(r.role||"")?n:e.jsx(ve,{})},Ne=({patients:n,onEdit:a,onDelete:l})=>{const[r,t]=s.useState("");if(!n||!Array.isArray(n))return e.jsx("div",{children:"No patients available."});const d=n.filter(o=>{var _;const S=r.toLowerCase(),w=`${o.first_name} ${o.last_name}`.toLowerCase(),k=o.languages.map(b=>b.language_name.toLowerCase()).join(" "),y=((_=o.insurance)==null?void 0:_.toLowerCase())||"";return w.includes(S)||k.includes(S)||y.includes(S)});return e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by name, language, or insurance type",value:r,onChange:o=>t(o.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"font-medium",children:[e.jsx("th",{className:"text-left w-[21%]",children:"Name"}),e.jsx("th",{className:"text-left w-[21%]",children:"Email"}),e.jsx("th",{className:"text-left w-[21%]",children:"Language"}),e.jsx("th",{className:"text-left w-[30%]",children:"Actions"})]})}),e.jsx("tbody",{children:d.map(o=>e.jsxs("tr",{className:"border-b border-blue-200",children:[e.jsxs("td",{className:"py-2",children:[o.first_name," ",o.last_name]}),e.jsx("td",{children:o.email}),e.jsx("td",{children:o.languages.map(S=>S.language_name).join(", ")}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>a(o),className:"mr-2 px-4 py-2 border border-blue-500 text-blue-500 rounded-lg hover:bg-blue-100",children:"Edit"}),e.jsx("button",{onClick:()=>l(o),className:"px-4 py-2 border border-red-500 text-red-500 rounded-lg hover:bg-red-100",children:"Delete"})]})]},o.userId))})]})]})},we=({handleSubmit:n,data:a})=>{const[l,r]=s.useState({title:"",first_name:"",last_name:"",street:"",postcode:"",city:"",state:"",country:"",phone_number:"",email:"",date_of_birth:null,specialization:null,languages:[],gender:"",password:""}),[t,d]=s.useState(!1),[o,S]=s.useState(null),[w,k]=s.useState([]),[y,_]=s.useState([]);s.useEffect(()=>{var u,T,F,$,O;(async()=>{try{const[I,g]=await Promise.all([E.get("/api/search/languages"),E.get("/api/search/specializations")]);k(I.data.map(m=>({value:m.id,label:m.language_name}))),_(g.data.map(m=>({value:m.id,label:m.area_of_specialization})))}catch(I){console.error("Error fetching options:",I),S("Failed to fetch options. Please try again.")}})(),a&&r({title:a.title||"",first_name:a.first_name||"",gender:a.gender||"",last_name:a.last_name||"",street:((u=a.address)==null?void 0:u.street)||"",postcode:((T=a.address)==null?void 0:T.postcode)||"",city:((F=a.address)==null?void 0:F.city)||"",state:(($=a.address)==null?void 0:$.state)||"",country:((O=a.address)==null?void 0:O.country)||"",phone_number:a.phone_number||"",password:"",email:a.email||"",date_of_birth:a.date_of_birth?new Date(a.date_of_birth):null,specialization:a.specialization?{value:a.specialization.id,label:a.specialization.area_of_specialization}:null,languages:a.languages?a.languages.map(I=>({value:I.id,label:I.language_name})):[]})},[a]);const b=c=>{const{id:u,value:T}=c.target;r(F=>({...F,[u]:T}))},L=c=>{r(u=>({...u,specialization:c}))},j=c=>{r(u=>({...u,languages:c}))},D=c=>{c.preventDefault(),n(l)};return t?e.jsx("div",{children:"Loading..."}):o?e.jsxs("div",{children:["Error: ",o]}):e.jsxs("form",{onSubmit:D,className:"space-y-8",children:[o&&e.jsx("div",{className:"text-red-500 mb-4",children:o}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title",children:"Title"}),e.jsx(K,{id:"title",options:[{value:"Mr.",label:"Mr."},{value:"Mrs.",label:"Mrs."},{value:"Ms.",label:"Ms."},{value:"Dr.",label:"Dr."},{value:"Prof.",label:"Prof."}],className:"basic-single-select",classNamePrefix:"select",value:{value:l.title,label:l.title},onChange:c=>r(u=>({...u,title:(c==null?void 0:c.value)||""}))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"gender",children:"Gender"}),e.jsx(K,{id:"gender",options:[{value:"female",label:"Female"},{value:"male",label:"Male"},{value:"diverse",label:"Diverse"},{value:"not disclosed",label:"Not Disclosed"}],className:"basic-single-select",classNamePrefix:"select",value:{value:l.gender,label:l.gender},onChange:c=>r(u=>({...u,gender:(c==null?void 0:c.value)||""}))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"date_of_birth",children:"Date of Birth"}),e.jsx(re,{id:"date_of_birth",selected:l.date_of_birth,onChange:c=>r(u=>({...u,date_of_birth:c})),className:"w-full p-2 border rounded"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"first_name",children:"First Name"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"first_name",name:"first_name",type:"text",value:l.first_name,onChange:b})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"last_name",children:"Last Name"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"last_name",name:"last_name",type:"text",value:l.last_name,onChange:b})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",name:"email",type:"email",value:l.email,onChange:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"phone_number",children:"Phone Number"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"phone_number",name:"phone_number",type:"tel",value:l.phone_number,onChange:b})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"street",children:"Street and House Number"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"street",name:"street",type:"text",value:l.street,onChange:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"postcode",children:"Postal Code"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"postcode",name:"postcode",type:"text",value:l.postcode,onChange:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"city",children:"City"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"city",name:"city",type:"text",value:l.city,onChange:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"state",children:"State"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"state",name:"state",type:"text",value:l.state,onChange:b})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"country",children:"Country"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"country",name:"country",type:"text",value:l.country,onChange:b})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Skills"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"specialization",children:"Specialization"}),e.jsx(K,{id:"specialization",options:y,className:"basic-single-select",classNamePrefix:"select",value:l.specialization,onChange:c=>L(c)})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"languages",children:"Languages"}),e.jsx(K,{id:"languages",isMulti:!0,options:w,className:"basic-multi-select",classNamePrefix:"select",value:l.languages,onChange:c=>j(c)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"One-Time Password"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx("label",{htmlFor:"password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:l.password,onChange:b,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]})]}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:a?"Update Patient":"Add Patient"})})]})},vs=({isOpen:n,onClose:a,doctorId:l})=>{const[r,t]=s.useState([]),[d,o]=s.useState(null),[S,w]=s.useState(""),[k,y]=s.useState(null);s.useEffect(()=>{n&&_()},[n,l]);const _=async()=>{try{const j=await E.get(`/api/availabilities/doctor/${l}`);t(j.data),y(null)}catch(j){console.error("Error fetching availabilities:",j),y("Failed to fetch availabilities. Please try again.")}},b=async()=>{if(!d||!S){y("Please select both date and time.");return}const j=new Date(d),[D,c]=S.split(":");j.setHours(parseInt(D),parseInt(c));try{const u=await E.post("/api/availabilities/availability-create",{doctor_id:l,availability_date:j.toISOString(),active:!0});if(u.status===201||u.status===200)console.log("Availability created successfully "),_(),o(null),w(""),y(null);else throw new Error(`Unexpected response status: ${u.status}`)}catch(u){console.error("Error creating availability:",u),y("Failed to create availability. Please try again.")}},L=async j=>{try{await E.delete(`/api/availabilities/${j}`),_()}catch(D){console.error("Error deleting availability:",D),y("Failed to delete availability. Please try again.")}};return n?e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center overflow-x-hidden overflow-y-auto outline-none focus:outline-none",children:[e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50"}),e.jsx("div",{className:"relative w-full max-w-md mx-auto my-6 z-50",children:e.jsxs("div",{className:"relative flex flex-col w-full bg-white border-0 rounded-lg shadow-lg outline-none focus:outline-none",children:[e.jsxs("div",{className:"flex flex-col items-start p-5 border-b border-solid border-gray-300 rounded-t",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Manage Availabilities"}),e.jsxs("div",{className:"mb-4 w-full",children:[e.jsx("h3",{className:"text-md font-medium mb-2",children:"Create New Availability"}),e.jsx(re,{selected:d,onChange:j=>o(j),dateFormat:"MMMM d, yyyy",className:"mb-2 p-2 border rounded w-full"}),e.jsx("input",{type:"time",value:S,onChange:j=>w(j.target.value),className:"mb-2 p-2 border rounded w-full"}),e.jsx("button",{onClick:b,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600 w-full",children:"Create"})]})]}),e.jsxs("div",{className:"relative p-6 flex-auto",children:[e.jsx("h3",{className:"text-md font-medium mb-2",children:"Current Availabilities"}),e.jsx("ul",{className:"max-h-60 overflow-y-auto",children:r.map(j=>e.jsxs("li",{className:"mb-2 flex justify-between items-center",children:[e.jsx("span",{children:new Date(j.availability_date).toLocaleString()}),e.jsx("span",{children:j.active?"Active":"Inactive"}),e.jsx("div",{children:j.active?e.jsx("button",{onClick:()=>L(j.id),className:"bg-red-500 text-white px-2 py-1 rounded text-sm hover:bg-red-600",children:"Delete"}):null})]},j.id))})]}),k&&e.jsx("p",{className:"text-red-500 mt-2 px-6",children:k}),e.jsx("div",{className:"flex items-center justify-end p-6 border-t border-solid border-gray-300 rounded-b",children:e.jsx("button",{onClick:a,className:"bg-gray-300 text-black px-4 py-2 rounded hover:bg-gray-400",children:"Close"})})]})})]}):null},Ns=({isOpen:n,onClose:a,doctorId:l,onUpdateSuccess:r})=>{const[t,d]=s.useState(!0),[o,S]=s.useState(!1),[w,k]=s.useState(!1),[y,_]=s.useState([]),[b,L]=s.useState([]),[j,D]=s.useState([]),[c,u]=s.useState([]),[T,F]=s.useState(null),[$,O]=s.useState(!1),[I,g]=s.useState(null),[m,N]=s.useState(!1),[x,v]=s.useState(null),f=s.useRef(!1),p=s.useCallback(async()=>{var P;if(!(f.current||!l))try{N(!0),F(null);const[R,h,M,V,q]=await Promise.all([E.get(`/api/users/doctor/${l}`),E.get("/api/search/languages"),E.get("/api/search/specializations"),E.get(`/api/appointments/doctor-patients/${l}`),E.get(`/api/appointments/doctor/${l}`)]),U=R.data,G={userId:U.id,address:{street:U.address.street,city:U.address.city,state:U.address.state,country:U.address.country,postcode:U.address.postal_code},first_name:U.first_name,last_name:U.last_name,email:U.email,languages:U.languages.map(ee=>({id:ee.id,language_name:ee.language_name})),title:U.title,specialization:{id:U.specialization.id,area_of_specialization:((P=U.specialization)==null?void 0:P.area_of_specialization)||"Not specified"},phone_number:U.phone_number,date_of_birth:new Date(U.date_of_birth)};if(v(G),_(h.data),L(M.data),D(V.data),q.data&&Array.isArray(q.data)){const ee=q.data.map(B=>{var C,H,A,J,Y,Q,ae,ne;return x?{id:B.id,appointmentDate:((C=B.availability)==null?void 0:C.availability_date)||"",appointmentReason:{reason:(H=B.appointment_reason)==null?void 0:H.reason,notes:(A=B.appointment_reason)==null?void 0:A.notes},bookTranslation:B.book_translation||!1,completed:B.completed||!1,doctor:{userId:x.userId,first_name:x.first_name,last_name:x.last_name,specialization:x.specialization,address:x.address,languages:x.languages,title:x.title||"",phone_number:x.phone_number||"",email:x.email||"",role:"doctor"},patient:{userId:B.user_id,first_name:((J=B.patient)==null?void 0:J.first_name)||"Unknown",last_name:((Y=B.patient)==null?void 0:Y.last_name)||"Patient",address:((Q=B.patient)==null?void 0:Q.address)||{street:"",city:"",state:"",country:"",postcode:""},languages:((ae=B.patient)==null?void 0:ae.languages)||[],role:"patient"},availability:{id:B.availability_id||0,doctor_id:x.userId,availability_date:((ne=B.availability)==null?void 0:ne.availability_date)||"",active:!0}}:(console.error("Doctor data missing for appointment:",B),null)}).filter(B=>B!==null);u(ee)}else F("Unexpected response format for appointments");f.current=!0}catch(R){console.error("Error fetching data:",R),F("Failed to fetch data. Please try again.")}finally{N(!1)}},[l,x]);s.useEffect(()=>{n&&l&&p()},[n,l,p]);const i=async P=>{var R;try{F(null);const h={title:P.title,first_name:P.first_name,last_name:P.last_name,address:{street:P.street,postcode:P.postcode,city:P.city,state:P.state,country:P.country},email:P.email,date_of_birth:P.date_of_birth,specialization_id:(R=P.specialization)==null?void 0:R.value,languages:P.languages.map(M=>M.value).filter(Boolean),phone_number:P.phone_number};await E.put(`/api/users/${l}`,h,{headers:{"Content-Type":"application/json"}}),a(),r()}catch(h){console.error("Error updating doctor:",h),h.response?F(`Failed to update doctor: ${h.response.data.message||h.message}`):h.request?F("Failed to update doctor: No response received from server"):F(`Failed to update doctor: ${h.message}`)}},z=P=>{g(P),O(!0)};return n?m?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:e.jsx("div",{className:"bg-white p-5 rounded-lg",children:"Loading doctor information..."})}):T||!x?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center",children:e.jsxs("div",{className:"bg-white p-5 rounded-lg",children:[e.jsx("p",{className:"text-red-500",children:T||"Failed to load doctor information"}),e.jsx("button",{onClick:a,className:"mt-4 bg-red-500 text-white p-2 rounded",children:"Close"})]})}):e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full",children:e.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["Edit ",x.title," ",x.first_name," ",x.last_name]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"button",className:"flex-1 bg-blue-500 text-white p-2 rounded",onClick:()=>z(l),children:"Manage availabilities"}),e.jsx("button",{onClick:a,className:"flex-1 bg-red-500 text-white p-2 rounded",children:"Close"})]}),$&&I!==null&&e.jsx(vs,{isOpen:$,onClose:()=>O(!1),doctorId:I}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("button",{className:"w-full text-left font-semibold bg-gray-200 p-2 rounded",onClick:()=>d(!t),children:[t?"▼":"►"," Edit Doctor Information"]}),t&&e.jsx(we,{data:x,handleSubmit:i,onClose:a})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("button",{className:"w-full text-left font-semibold bg-gray-200 p-2 rounded",onClick:()=>k(!w),children:[w?"▼":"►"," Doctor's Appointments"]}),w&&e.jsx(pe,{appointments:c,fetchAppointments:p,doctorId:x.userId})]}),e.jsxs("div",{children:[e.jsxs("button",{className:"w-full text-left font-semibold bg-gray-200 p-2 rounded",onClick:()=>S(!o),children:[o?"▼":"►"," Doctor's Patients"]}),o&&e.jsx("div",{className:"mt-2",children:e.jsx(Ne,{patients:j,onEdit:P=>console.log("Edit patient",P),onDelete:P=>console.log("Delete patient",P)})})]})]})}):null},_e=me.memo(Ns),se={GET_ALL_APPOINTMENTS:"/api/appointments/",CREATE_APPOINTMENT:"/api/appointments/new",CREATE_APPOINTMENT_BY_ADMIN:"/api/appointments/create-new",GET_USER_APPOINTMENTS:"/api/appointments/user-appointments",GET_DOCTOR_APPOINTMENTS:"/api/appointments/doctor-appointments",GET_DOCTOR_PATIENTS:n=>`/api/appointments/doctor-patients/${n}`,GET_USER_DOCTORS:n=>`/api/appointments/user-doctors/${n}`,GET_USER_APPOINTMENTS_BY_ADMIN:n=>`/api/appointments/user/${n}`,GET_DOCTOR_APPOINTMENTS_BY_ADMIN:n=>`/api/appointments/doctor/${n}`,UPDATE_APPOINTMENT:n=>`/api/appointments/${n}`,DELETE_APPOINTMENT:n=>`/api/appointments/${n}`,CREATE_AVAILABILITY:"/api/availabilities/",CREATE_AVAILABILITY_BY_DOCTOR:"/api/availabilities/availability-create",GET_ALL_AVAILABILITIES:"/api/availabilities/all-availabilities",GET_DOCTOR_AVAILABILITIES:"/api/availabilities/doctor-availabilities",GET_DOCTOR_AVAILABILITIES_BY_USER:n=>`/api/availabilities/doctor/${n}`,GET_AVAILABILITY_BY_ID:n=>`/api/availabilities/${n}`,UPDATE_AVAILABILITY:n=>`/api/availabilities/${n}`,DELETE_AVAILABILITY:n=>`/api/availabilities/${n}`,SEARCH:"/api/dashboard/",GET_LANGUAGES:"/api/dashboard/languages",GET_SPECIALIZATIONS:"/api/dashboard/specializations",GET_DOCTORS_COUNT:"/api/dashboard/doctors-count",GET_USERS_COUNT:"/api/dashboard/users-count",GET_DOCTORS:"/api/users/",CREATE_USER:"/api/users/admin-create",GET_PATIENTS:"/api/users/patients",GET_ALL_USERS:"/api/users/all-users",GET_DOCTOR_BY_ID:n=>`/api/users/doctor/${n}`,GET_USER_BY_ID:n=>`/api/users/${n}`,UPDATE_USER:n=>`/api/users/${n}`,DELETE_USER:n=>`/api/users/${n}`},ce={FETCH_FAILED:"Failed to fetch data. Please try again.",CREATE_FAILED:"Failed to create resource.",UPDATE_FAILED:"Failed to update resource.",DELETE_FAILED:"Failed to delete resource.",UNAUTHORIZED:"You do not have permission to perform this action."},he=({handleSubmit:n,patientId:a})=>{const[l,r]=s.useState([]),[t,d]=s.useState({title:"",first_name:"",last_name:"",email:"",date_of_birth:null,phone_number:"",address:{street:"",postcode:"",city:"",state:"",country:""},emergency_contact_details:{name:"",phone_number:"",relationship:""},accessibility_needs:"",insurance_type:"",gender:"",languages:[],password:""}),[o,S]=s.useState(null);s.useEffect(()=>{w()},[]);const w=async()=>{try{const c=await E.get(se.GET_LANGUAGES);r(c.data)}catch(c){console.error("Error fetching languages:",c),S(ce.FETCH_FAILED)}};s.useEffect(()=>{a&&k(a)},[a]);const k=async c=>{var u,T,F,$,O,I,g,m,N;try{S(null);const v=(await E.get(`/api/users/${c}`)).data;d({password:v.password||"",title:v.title||"",first_name:v.first_name||"",last_name:v.last_name||"",email:v.email||"",date_of_birth:v.date_of_birth?new Date(v.date_of_birth):null,phone_number:v.phone_number||"",address:{street:((u=v.address)==null?void 0:u.street)||"",postcode:((T=v.address)==null?void 0:T.postcode)||"",city:((F=v.address)==null?void 0:F.city)||"",state:(($=v.address)==null?void 0:$.state)||"",country:((O=v.address)==null?void 0:O.country)||""},emergency_contact_details:{name:((I=v.emergency_contact_details)==null?void 0:I.name)||"",phone_number:((g=v.emergency_contact_details)==null?void 0:g.phone_number)||"",relationship:((m=v.emergency_contact_details)==null?void 0:m.relationship)||""},accessibility_needs:v.accessibility_needs||"",insurance_type:v.insurance_type||"",gender:v.gender||"",languages:((N=v.languages)==null?void 0:N.map(f=>({value:f.id,label:f.language_name})))||[]})}catch(x){console.error("Error fetching patient details:",x),S("Failed to fetch patient details. Please try again.")}},y=c=>{const{name:u,value:T}=c.target;d(F=>({...F,[u]:T}))},_=c=>{const{name:u,value:T}=c.target;d(F=>({...F,address:{...F.address,[u]:T}}))},b=c=>{const{name:u,value:T}=c.target;d(F=>({...F,emergency_contact_details:{...F.emergency_contact_details,[u]:T}}))},L=c=>{d(u=>({...u,date_of_birth:c}))},j=c=>{d(u=>({...u,languages:c}))},D=c=>{c.preventDefault(),n(t)};return e.jsxs("form",{onSubmit:D,className:"space-y-8",children:[o&&e.jsx("div",{className:"text-red-500 mb-4",children:o}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"title",children:"Title"}),e.jsx(K,{id:"title",options:[{value:"Mr.",label:"Mr."},{value:"Mrs.",label:"Mrs."},{value:"Ms.",label:"Ms."},{value:"Dr.",label:"Dr."},{value:"Prof.",label:"Prof."}],className:"basic-single-select",classNamePrefix:"select",value:{value:t.title,label:t.title},onChange:c=>d(u=>({...u,title:(c==null?void 0:c.value)||""}))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"gender",children:"Gender"}),e.jsx(K,{id:"gender",options:[{value:"Female",label:"Female"},{value:"Male",label:"Male"},{value:"Diverse",label:"Diverse"},{value:"Not Disclosed",label:"Not Disclosed"}],className:"basic-single-select",classNamePrefix:"select",value:{value:t.gender,label:t.gender},onChange:c=>d(u=>({...u,gender:(c==null?void 0:c.value)||""}))})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"first_name",children:"First Name"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"first_name",name:"first_name",type:"text",value:t.first_name,onChange:y})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"last_name",children:"Last Name"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"last_name",name:"last_name",type:"text",value:t.last_name,onChange:y})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"date_of_birth",children:"Date of Birth"}),e.jsx(re,{id:"date_of_birth",selected:t.date_of_birth,onChange:L,className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"languages",className:"block text-sm font-medium text-gray-700",children:"Languages"}),e.jsx(K,{isMulti:!0,options:l.map(c=>({value:c.id,label:c.language_name})),value:t.languages,onChange:j,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Contact Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[" ",e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"email",children:"Email"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"email",name:"email",type:"email",value:t.email,onChange:y})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"phone_number",children:"Phone Number"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"phone_number",name:"phone_number",type:"tel",value:t.phone_number,onChange:y})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"street",children:"Street and House Number"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"street",name:"street",type:"text",value:t.address.street,onChange:_})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"postcode",children:"Postal Code"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"postcode",name:"postcode",type:"text",value:t.address.postcode,onChange:_})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"city",children:"City"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"city",name:"city",type:"text",value:t.address.city,onChange:_})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"state",children:"State"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"state",name:"state",type:"text",value:t.address.state,onChange:_})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"country",children:"Country"}),e.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",id:"country",name:"country",type:"text",value:t.address.country,onChange:_})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Emergency Contact"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"emergency_contact_name",children:"Name"}),e.jsx("input",{type:"text",id:"emergency_contact_name",name:"name",value:t.emergency_contact_details.name,onChange:b,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"emergency_contact_phone",children:"Phone"}),e.jsx("input",{type:"tel",id:"emergency_contact_phone",name:"phone_number",value:t.emergency_contact_details.phone_number,onChange:b,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"emergency_contact_relationship",children:"Relationship"}),e.jsx("input",{type:"text",id:"emergency_contact_relationship",name:"relationship",value:t.emergency_contact_details.relationship,onChange:b,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Medical Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{children:[e.jsx("label",{htmlFor:"insurance_type",className:"block text-gray-700 text-sm font-bold mb-2",children:"Insurance Type"}),e.jsx(K,{id:"insurance_type",options:[{value:"private",label:"private"},{value:"public",label:"public"}],className:"basic-single-select",classNamePrefix:"select",value:{value:t.insurance_type,label:t.insurance_type},onChange:c=>d(u=>({...u,insurance_type:(c==null?void 0:c.value)||""}))})]})}),e.jsxs("div",{className:"mb-4",children:[" ",e.jsxs("div",{children:[e.jsx("label",{htmlFor:"accessibility_needs",className:"block text-gray-700 text-sm font-bold mb-2",children:"Accessibility Needs"}),e.jsx("input",{type:"text",id:"accessibility_needs",name:"accessibility_needs",value:t.accessibility_needs,onChange:y,className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"One-Time Password"}),e.jsxs("div",{className:"grid gap-4",children:[e.jsx("label",{htmlFor:"password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:t.password,onChange:y,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50"})]})]}),e.jsx("div",{className:"flex justify-end space-x-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 w-full",children:"Save"})})]})},ws=({isOpen:n,onClose:a,onConfirm:l,doctorName:r})=>n?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center",children:e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Deletion"}),e.jsxs("p",{children:["Are you sure you want to delete Dr. ",r,"?"]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{onClick:a,className:"mr-2 px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]})]})}):null,_s=({doctors:n,loading:a,error:l,onRefresh:r})=>{const[t,d]=s.useState(""),[o,S]=s.useState(!1),[w,k]=s.useState(!1),[y,_]=s.useState(null),b=u=>{_(u)};s.useEffect(()=>{y&&k(!0)},[y]);const L=u=>{_(u),S(!0)},j=async()=>{if(y)try{await E.delete(`/api/users/${y.userId}`),r()}catch(u){console.error("Error deleting doctor:",u)}finally{S(!1)}},D=()=>{k(!1),r()},c=n.filter(u=>{var I,g,m;const T=t.toLowerCase(),F=`${u.title||""} ${u.first_name||""} ${u.last_name||""}`.toLowerCase(),$=((g=(I=u.specialization)==null?void 0:I.area_of_specialization)==null?void 0:g.toLowerCase())||"",O=((m=u.languages)==null?void 0:m.map(N=>N.language_name.toLowerCase()).join(" "))||"";return F.includes(T)||$.includes(T)||O.includes(T)});return a?e.jsx("div",{children:"Loading..."}):l?e.jsx("div",{className:"error-message",children:l}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",placeholder:"Search by name, specialization, or language",value:t,onChange:u=>d(u.target.value),className:"w-full p-2 border border-gray-300 rounded-lg"})}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"font-medium",children:[e.jsx("th",{className:"text-left w-[21%]",children:"Doctor"}),e.jsx("th",{className:"text-left w-[21%]",children:"Specialization"}),e.jsx("th",{className:"text-left w-[14%]",children:"Languages"}),e.jsx("th",{className:"text-left w-[26%]",children:"Actions"})]})}),e.jsx("tbody",{children:c.map(u=>{var T,F;return e.jsxs("tr",{className:"border-b border-blue-200",children:[e.jsx("td",{children:`${u.title||""} ${u.first_name||""} ${u.last_name||""}`}),e.jsx("td",{children:((T=u.specialization)==null?void 0:T.area_of_specialization)||""}),e.jsx("td",{children:((F=u.languages)==null?void 0:F.map($=>$.language_name).join(", "))||""}),e.jsxs("td",{children:[e.jsx("button",{onClick:()=>b(u),className:"mr-2 px-4 py-2 border border-blue-500 text-blue-500 rounded-lg hover:bg-blue-100",children:"Edit"}),e.jsx("button",{onClick:()=>L(u),className:"px-4 py-2 border border-red-500 text-red-500 rounded-lg hover:bg-red-100",children:"Delete"})]})]},u.userId)})})]}),e.jsx(ws,{isOpen:o,onClose:()=>S(!1),onConfirm:j,doctorName:y?`${y.first_name} ${y.last_name}`:""}),w&&y&&e.jsx(_e,{isOpen:w,onClose:D,doctorId:y.userId,onUpdateSuccess:r})]})},Ce=me.memo(_s),Se=({isOpen:n,onClose:a,onUpdateSuccess:l,patientId:r})=>{const[t,d]=s.useState(null),[o,S]=s.useState(!1),[w,k]=s.useState(!0),[y,_]=s.useState(!1),[b,L]=s.useState([]),[j,D]=s.useState([]),[,c]=s.useState([]),[u,T]=s.useState(!1);s.useEffect(()=>{n&&r&&($(r.toString()),O(),F())},[n,r]);const F=async()=>{var g,m,N,x,v,f;try{T(!0);const i=(await E.get(`/api/users/${r}`)).data,z={userId:i.id.toString(),first_name:i.first_name,last_name:i.last_name,email:i.email,role:i.role,address:{street:((g=i.address)==null?void 0:g.street)||"",city:((m=i.address)==null?void 0:m.city)||"",state:((N=i.address)==null?void 0:N.state)||"",country:((x=i.address)==null?void 0:x.country)||"",postcode:((v=i.address)==null?void 0:v.postal_code)||""},languages:((f=i.languages)==null?void 0:f.map(P=>({id:P.id,language_name:P.language_name})))||[],title:i.title,phone_number:i.phone_number,date_of_birth:i.date_of_birth?new Date(i.date_of_birth):new Date,insurance:i.insurance_type,accessibility_needs:i.accessibility_needs,emergency_contact_details:i.emergency_contact_details,gender:i.gender};c([z])}catch(p){console.error("Error fetching patient:",p),d("Failed to fetch patient. Please try again.")}finally{T(!1)}},$=async g=>{try{const m=await E.get(`/api/appointments/user/${g}`);if(m.data&&Array.isArray(m.data)){const N=m.data.map(x=>{var v,f,p,i,z,P,R;return{id:x.id,doctor:{first_name:((v=x.doctor)==null?void 0:v.first_name)||"Unknown",last_name:((f=x.doctor)==null?void 0:f.last_name)||"Doctor"},patient:{first_name:((p=x.user)==null?void 0:p.first_name)||"Unknown",last_name:((i=x.user)==null?void 0:i.last_name)||"Patient"},appointmentDate:((z=x.availability)==null?void 0:z.availability_date)||null,appointmentReason:{reason:((P=x.appointment_reason)==null?void 0:P.reason)||"No Reason Provided",notes:((R=x.appointment_reason)==null?void 0:R.notes)||""},completed:x.completed||!1}});L(N)}else console.error("Unexpected response format for appointments:",m.data),d("Failed to fetch appointments. Unexpected data format.")}catch(m){console.error("Error fetching appointments:",m),d("Failed to fetch appointments. Please try again.")}},O=async()=>{try{T(!0);const g=await E.get(`/api/appointments/user-doctors/${r}`);if(g.data&&Array.isArray(g.data)){const m=g.data.map(N=>{var x,v,f,p,i,z;return{userId:N.id,id:N.id,title:N.doctor_name.split(" ")[0]||"",first_name:N.doctor_name.split(" ")[1]||"",last_name:N.doctor_name.split(" ").slice(2).join(" ")||"",email:N.email||"",role:"doctor",address:{street:((x=N.address)==null?void 0:x.street)||"",city:((v=N.address)==null?void 0:v.city)||"",state:((f=N.address)==null?void 0:f.state)||"",country:((p=N.address)==null?void 0:p.country)||"",postcode:((i=N.address)==null?void 0:i.postal_code)||""},languages:N.languages.map(P=>({language_name:P,id:0})),phone_number:N.phone_number||"",date_of_birth:N.date_of_birth?new Date(N.date_of_birth):void 0,gender:N.gender||"",specialization:{id:((z=N.specialization)==null?void 0:z.id)||0,area_of_specialization:N.area_of_specialization||"Not specified"}}});D(m)}else console.error("Unexpected response format for doctors:",g.data),d("Failed to fetch doctors. Unexpected data format.")}catch(g){console.error("Error fetching doctors:",g),d("Failed to fetch doctors. Please try again.")}finally{T(!1)}},I=async g=>{try{d(null);const m={first_name:g.first_name,last_name:g.last_name,email:g.email,phone_number:g.phone_number,title:g.title,date_of_birth:g.date_of_birth,insurance_type:g.insurance_type,accessibility_needs:g.accessibility_needs,address:{street:g.address.street,postal_code:g.address.postcode,city:g.address.city,state:g.address.state,country:g.address.country},emergency_contact_details:{name:g.emergency_contact_details.name,phone_number:g.emergency_contact_details.phone_number,relationship:g.emergency_contact_details.relationship},languages:g.languages.map(x=>x.value),gender:g.gender},N=await E.put(`/api/users/${r}`,m);if(N.status===200||N.status===201)console.log("Patient updated successfully"),a(),l();else throw new Error(`Unexpected response status: ${N.status}`)}catch(m){console.error("Error updating patient:",m),m.response?(console.error("Response data:",m.response.data),console.error("Response status:",m.response.status),console.error("Response headers:",m.response.headers),d(`Failed to update patient. Server responded with: ${m.response.data.error||m.response.statusText}`)):m.request?(console.error("No response received:",m.request),d("Failed to update patient. No response received from server.")):(console.error("Error message:",m.message),d(`Failed to update patient: ${m.message}`))}};return n?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Patient "}),e.jsx("button",{onClick:a,className:"text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("button",{className:"w-full text-left font-semibold bg-gray-200 p-2 rounded",onClick:()=>k(!w),children:[w?"▼":"►"," Edit Patient"]}),w&&r!==void 0&&e.jsx(he,{patientId:r.toString(),handleSubmit:I,onClose:a})]}),e.jsxs("div",{className:"mt-8",children:[e.jsxs("button",{className:"w-full text-left font-semibold bg-gray-200 p-2 rounded",onClick:()=>S(!o),children:[o?"▼":"►"," Patient's Appointments (",b.length,")"]}),o&&r!==void 0&&e.jsx(pe,{appointments:b,fetchAppointments:()=>$(r.toString()),patientId:Number(r)})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("button",{className:"w-full text-left font-semibold bg-gray-200 p-2 rounded",onClick:()=>_(!y),children:[y?"▼":"►"," Patient's Doctors (",j.length,")"]}),y&&e.jsx(Ce,{doctors:j,loading:u,error:t,onRefresh:()=>O()})]}),t&&e.jsx("p",{className:"text-red-500 mt-2",children:t})]})}):null},Ae=({isOpen:n,onClose:a,onConfirm:l})=>n?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center",children:e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Deletion"}),e.jsx("p",{children:"Are you sure you want to delete the appointment?"}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{onClick:a,className:"mr-2 px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]})]})}):null,fe={"Regular consultation":["Routine Check-up","Diagnostic appointment","Follow Up appointment","Non-urgent medical issue","Other"],"Acute Consultation":["Sudden worsening of chronic condition","Acute infection","Acute pain"],"Preventive Health Check-Ups":["Annual Health Check-Up","Cancer Screening","Well-Child Visit","Vaccination appointment","Other"]},Cs=({isOpen:n,onClose:a,onSubmit:l,appointment:r})=>{var R;const[t,d]=s.useState([]),[o,S]=s.useState([]),[w,k]=s.useState([]),[y,_]=s.useState(null),[b,L]=s.useState(null),[j,D]=s.useState(null),[c,u]=s.useState(null),[T,F]=s.useState(""),[$,O]=s.useState(""),[I,g]=s.useState(!1),[,m]=s.useState(!1),[N,x]=s.useState(null);s.useEffect(()=>{var h,M;if(n&&r){_(r.patient),L(r.doctor);const V=new Date(r.appointmentDate),q=V.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}).substring(0,5);D(V),u(q),F(((h=r.appointmentReason)==null?void 0:h.reason)||""),O(((M=r.appointmentReason)==null?void 0:M.notes)||""),g(r.bookTranslation)}},[n,r]);const v=s.useCallback(async()=>{try{m(!0);const h=await E.get("/api/users/patients");d(h.data)}catch(h){console.error("Error fetching patients:",h),x("Failed to fetch patients. Please try again.")}finally{m(!1)}},[]),f=s.useCallback(async()=>{try{m(!0);const h=await E.get("/api/users");S(h.data)}catch(h){console.error("Error fetching doctors:",h),x("Failed to fetch doctors. Please try again.")}finally{m(!1)}},[]);s.useEffect(()=>{n&&(v(),f())},[n,v,f]);const p=s.useCallback(async h=>{try{m(!0),x(null);const M=await E.get(`/api/availabilities/doctor/${h}`);k(M.data)}catch(M){console.error("Error fetching availabilities:",M),x(`Failed to fetch availabilities. ${M.message}`)}finally{m(!1)}},[]);s.useEffect(()=>{b&&p(b.userId)},[b,p]);const i=()=>[...new Set(w.map(M=>M.availability_date.split("T")[0]))].map(M=>new Date(M)),z=h=>{const M=h.toISOString().split("T")[0];return w.filter(V=>V.availability_date.startsWith(M)).map(V=>V.availability_date.split("T")[1].substring(0,5))},P=async h=>{var M,V,q;if(h.preventDefault(),y&&b&&j&&c){const U={user_id:y.userId,doctor_id:b.userId,availability_id:(M=w.find(G=>G.availability_date.startsWith(j.toISOString().split("T")[0])&&G.availability_date.includes(c)))==null?void 0:M.id,appointment_reason:{reason:T,notes:$},book_translation:I};try{m(!0),x(null);const G=await E.put(`/api/appointments/${r.id}`,U);l(G.data),a()}catch(G){console.error("Error updating appointment:",G),x(`Failed to update appointment. ${((q=(V=G.response)==null?void 0:V.data)==null?void 0:q.error)||G.message}`)}finally{m(!1)}}};return n?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Edit Appointment"}),e.jsx("button",{onClick:a,className:"text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),N&&e.jsx("div",{className:"text-red-500 mb-4",children:N}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Patient:"}),e.jsx("select",{value:(y==null?void 0:y.userId)||"",onChange:h=>_(t.find(M=>M.userId===Number(h.target.value))||null),className:"w-full p-2 border rounded",children:t.map(h=>e.jsxs("option",{value:h.userId,children:[h.first_name," ",h.last_name]},h.userId))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Doctor:"}),e.jsx("select",{value:(b==null?void 0:b.userId)||"",onChange:h=>L(o.find(M=>M.userId===Number(h.target.value))||null),className:"w-full p-2 border rounded",children:o.map(h=>e.jsxs("option",{value:h.userId,children:[h.first_name," ",h.last_name]},h.userId))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Current Appointment:"}),e.jsx("p",{className:"font-semibold",children:r&&new Date(r.appointmentDate).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Select New Date:"}),e.jsx(re,{selected:j,onChange:h=>{D(h),u(null)},includeDates:i(),dateFormat:"MMMM d, yyyy",placeholderText:"Select an available date",className:"w-full p-2 border rounded"})]}),j&&e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Select New Time:"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:z(j).map(h=>{const M=h===c;return e.jsx("button",{type:"button",onClick:()=>u(h),className:`p-2 rounded ${M?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:h},h)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Appointment Reason:"}),e.jsxs("select",{value:T,onChange:h=>{F(h.target.value),O("")},className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select a reason category"}),Object.keys(fe).map(h=>e.jsx("option",{value:h,children:h},h))]})]}),T&&e.jsxs("div",{children:[e.jsx("label",{className:"block mb-1",children:"Specific Reason:"}),e.jsxs("select",{value:$,onChange:h=>O(h.target.value),className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select a specific reason"}),(R=fe[T])==null?void 0:R.map(h=>e.jsx("option",{value:h,children:h},h))]})]}),e.jsxs("div",{className:"bg-blue-100 p-4 rounded-lg",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:I,onChange:h=>g(h.target.checked),className:"form-checkbox h-5 w-5 text-blue-600"}),e.jsx("span",{className:"text-lg font-medium",children:"Book Translation"})]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Check this if translation services for this appointment are needed."})]}),e.jsx("div",{className:"flex justify-end space-x-2",children:e.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Update Appointment"})})]})]})}):null},pe=({appointments:n,fetchAppointments:a,doctorId:l})=>{const[r,t]=s.useState(null),[d,o]=s.useState(null),[S,w]=s.useState(null),[k,y]=s.useState(!1),[_,b]=s.useState(!1),[L,j]=s.useState(""),[D,c]=s.useState(!1),[u,T]=s.useState("all");s.useEffect(()=>{l!==void 0&&a(l)},[l,a]);const F=i=>{const z=new Date(i);return isNaN(z.getTime())?"Invalid Date":`${z.toLocaleDateString()} ${z.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`},$=i=>i?"bg-green-200 text-green-800":"bg-yellow-200 text-yellow-800",O=i=>{t(i),y(!0)},I=i=>{o(i),y(!0)},g=()=>{t(null),o(null),w(null),y(!1),b(!1)},m=i=>{w(i),y(!0)},N=i=>{w(i),b(!0)},x=async()=>{if(S)try{await E.delete(`/api/appointments/${S.id}`),b(!1),a(l)}catch(i){console.error("Error deleting appointment:",i),b(!1)}},v=async()=>{await a(l),g()},f="text-blue-600 hover:text-blue-800 cursor-pointer transition duration-300 border-b border-transparent hover:border-blue-800",p=n.filter(i=>{var V,q,U,G;const z=`${(V=i.doctor)==null?void 0:V.first_name} ${(q=i.doctor)==null?void 0:q.last_name}`.toLowerCase(),P=`${(U=i.patient)==null?void 0:U.first_name} ${(G=i.patient)==null?void 0:G.last_name}`.toLowerCase(),R=z.includes(L.toLowerCase())||P.includes(L.toLowerCase()),h=!D||i.bookTranslation,M=u==="all"||u==="completed"&&i.completed||u==="pending"&&!i.completed;return R&&h&&M});return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-4",children:[e.jsx("input",{type:"text",placeholder:"Search doctor or patient",value:L,onChange:i=>j(i.target.value),className:"p-2 border rounded"}),e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:D,onChange:i=>c(i.target.checked),className:"mr-2"}),"Translation Service"]}),e.jsxs("select",{value:u,onChange:i=>T(i.target.value),className:"p-2 border rounded",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"completed",children:"Completed"}),e.jsx("option",{value:"pending",children:"Pending"})]})]}),e.jsxs("table",{className:"min-w-full bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"font-medium",children:[e.jsx("th",{className:"text-left w-[26%]",children:"Doctor"}),e.jsx("th",{className:"text-left w-[21%]",children:"Patient"}),e.jsx("th",{className:"text-left w-[21%]",children:"Date & Time"}),e.jsx("th",{className:"text-left w-[21%]",children:"Reason"}),e.jsx("th",{className:"text-left w-[21%]",children:"Status"}),e.jsx("th",{className:"text-left w-[26%]",children:"Actions"})]})}),e.jsx("tbody",{children:p.map(i=>e.jsxs("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4",children:i.doctor?e.jsx("span",{onClick:()=>O(i.doctor),className:f,children:`${i.doctor.first_name} ${i.doctor.last_name}`}):"Unknown Doctor"}),e.jsx("td",{className:"py-4 px-4",children:i.patient?e.jsx("span",{onClick:()=>I(i.patient),className:f,children:`${i.patient.first_name} ${i.patient.last_name}`}):"Unknown Patient"}),e.jsx("td",{className:"py-4 px-4",children:F(i.appointmentDate)||"No date provided"}),e.jsx("td",{className:"py-4 px-4",children:i.appointmentReason?`${i.appointmentReason.reason||""} - ${i.appointmentReason.notes||""}`:"No Reason Provided"}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`py-1 px-3 rounded-full text-xs font-medium ${$(i.completed)}`,children:i.completed?"Completed":"Pending"})}),e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("button",{onClick:()=>m(i),className:"mr-2 px-4 py-2 border border-blue-500 text-blue-500 rounded-lg hover:bg-blue-100",children:"Edit"}),e.jsx("button",{onClick:()=>N(i),className:"px-4 py-2 border border-red-500 text-red-500 rounded-lg hover:bg-red-100",children:"Delete"})]})]},i.id))})]}),k&&r&&e.jsx(_e,{isOpen:k,onClose:g,onUpdateSuccess:v,doctorId:r.userId}),k&&d&&e.jsx(Se,{isOpen:k,onClose:g,patientId:d.userId,onUpdateSuccess:v}),k&&S&&e.jsx(Cs,{isOpen:k,onClose:g,onSubmit:v,appointment:S}),e.jsx(Ae,{isOpen:_,onClose:()=>b(!1),onConfirm:x})]})},Ss=()=>{const n=[{name:"Dashboard",link:"/admindashboard",icon:e.jsx(Ie,{size:20})},{name:"Manage Patients",link:"/patients",icon:e.jsx(Me,{size:28})},{name:"Manage Doctors",link:"/doctors",icon:e.jsx(Re,{size:24})},{name:"Manage Appointments",link:"/appointments",icon:e.jsx($e,{size:22})}];return e.jsxs("div",{className:"w-[262px] h-screen py-4 px-4 flex flex-col bg-blue-600",children:[e.jsx("div",{className:"text-white italia text-2xl font-semibold",children:"Health Connect"}),e.jsx("div",{className:"flex flex-col gap-6 mt-14",children:n.map((a,l)=>e.jsxs(De,{to:a.link,className:({isActive:r})=>r?"flex flex-row gap-[6px] items-center bg-white h-12 rounded-[50px] pl-4 text-black font-medium":"flex flex-row gap-[6px] items-center h-12 rounded-[50px] pl-4 transition text-white hover:text-black hover:bg-white duration-200 font-normal",children:[a.icon,e.jsx("span",{children:a.name})]},l))})]})},te=({children:n,text:a})=>e.jsxs("div",{children:[e.jsx("div",{className:"fixed",children:e.jsx(Ss,{})}),e.jsxs("div",{className:"flex w-full flex-col",children:[e.jsx("div",{className:"fixed pl-[262px] w-full",children:e.jsx(xe,{text:a})}),e.jsx("div",{className:"ml-[262px] mt-[65px]",children:n})]})]}),be={"Regular consultation":["Routine Check-up","Diagnostic appointment","Follow Up appointment","Non-urgent medical issue","Other"],"Acute Consultation":["Sudden worsening of chronic condition","Acute infection","Acute pain"],"Preventive Health Check-Ups":["Annual Health Check-Up","Cancer Screening","Well-Child Visit","Vaccination appointment","Other"]},Ee=({isOpen:n,onClose:a,sendby:l,onSubmit:r,preselectedPatientId:t,preselectedDoctor:d})=>{const[o,S]=s.useState([]);s.useState(null);const[w,k]=s.useState([]),[y,_]=s.useState([]),[b,L]=s.useState(!1),[j,D]=s.useState(null),{control:c,handleSubmit:u,watch:T,setValue:F}=ns({defaultValues:{patientId:t||0,doctorId:(d==null?void 0:d.id)||0,date:null,time:"",appointmentReasonCategory:"",appointmentReasonSubcategory:"",bookTranslation:!1}}),$=T("doctorId"),O=T("date");T("time");const I=s.useCallback(async()=>{if(l==="Admin")try{L(!0);const p=(await E.get(se.GET_PATIENTS)).data.map(i=>({userId:i.id,first_name:i.first_name,last_name:i.last_name,address:i.address,languages:i.languages,location:i.location,insurance:i.insurance_type}));S(p)}catch(f){console.error("Error fetching patients:",f),D("Failed to fetch patients. Please try again.")}finally{L(!1)}},[l]),g=s.useCallback(async()=>{try{L(!0);const f=await E.get(se.GET_DOCTORS);k(f.data)}catch(f){console.error("Error fetching doctors:",f),D("Failed to fetch doctors. Please try again.")}finally{L(!1)}},[]);s.useEffect(()=>{n&&(I(),g())},[n,I,g]);const m=s.useCallback(async f=>{try{L(!0),D(null);const p=await E.get(`/api/availabilities/doctor/${f}`);if(p.data&&Array.isArray(p.data))_(p.data);else throw new Error("Unexpected response format for availabilities")}catch(p){console.error("Error fetching availabilities:",p),D(`Failed to fetch availabilities. ${p.message}`),_([])}finally{L(!1)}},[]);s.useEffect(()=>{$&&m(Number($))},[$,m]);const N=()=>[...new Set(y.map(p=>p.availability_date.split("T")[0]))].map(p=>new Date(p)),x=f=>{const p=f.toISOString().split("T")[0];return y.filter(i=>i.availability_date.startsWith(p)&&i.active).map(i=>i.availability_date.split("T")[1].substring(0,5))},v=async f=>{var p,i;try{L(!0),D(null);const z=y.find(h=>h.availability_date.startsWith(f.date.toISOString().split("T")[0])&&h.availability_date.includes(f.time));if(!z||!z.id)throw new Error("Selected availability not found or invalid");const P={user_id:l==="Patient"?t:f.patientId,doctor_id:f.doctorId,availability_id:z.id,appointment_reason:{reason:f.appointmentReasonCategory,notes:f.appointmentReasonSubcategory},book_translation:f.bookTranslation};console.log("New appointment data:",P);let R;l==="Admin"?R=await E.post("/api/appointments/create-new",P):l==="Patient"&&(R=await E.post("/api/appointments/new",P)),R&&R.data&&(r(R.data),a())}catch(z){console.error("Error adding appointment:",z),D(`Failed to add appointment. ${((i=(p=z.response)==null?void 0:p.data)==null?void 0:i.error)||z.message}`)}finally{L(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Add New Appointment"}),j&&e.jsx("p",{className:"text-red-500 mb-4",children:j}),e.jsxs("form",{onSubmit:u(v),children:[l==="Admin"&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Patient:"}),e.jsx(Z,{name:"patientId",control:c,rules:{required:"Patient is required"},render:({field:f})=>e.jsxs("select",{...f,className:"w-full p-2 border rounded",onChange:p=>{const i=Number(p.target.value);f.onChange(i)},children:[e.jsx("option",{value:"",children:"Select a patient"}),o.map(p=>e.jsxs("option",{value:p.userId,children:[p.first_name," ",p.last_name]},p.userId))]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Doctor:"}),e.jsx(Z,{name:"doctorId",control:c,rules:{required:"Doctor is required"},render:({field:f})=>e.jsxs("select",{...f,className:"w-full p-2 border rounded",onChange:p=>{const i=Number(p.target.value);f.onChange(i)},children:[e.jsx("option",{value:"",children:"Select a doctor"}),w.map(p=>{var i;return e.jsxs("option",{value:p.id,children:[p.title," ",p.first_name," ",p.last_name," -"," ",(i=p.specialization)==null?void 0:i.area_of_specialization]},p.id)})]})})]}),$&&y.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Select Date:"}),e.jsx(Z,{name:"date",control:c,rules:{required:"Date is required"},render:({field:f})=>e.jsx(re,{selected:f.value,onChange:p=>f.onChange(p),includeDates:N(),dateFormat:"MMMM d, yyyy",placeholderText:"Select an available date",className:"w-full p-2 border rounded"})})]}),O&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Select Time:"}),e.jsx(Z,{name:"time",control:c,rules:{required:"Time is required"},render:({field:f})=>e.jsx("div",{children:x(O).map(p=>e.jsx("button",{type:"button",onClick:()=>f.onChange(p),className:`m-1 p-2 rounded ${f.value===p?"bg-blue-500 text-white":"bg-gray-200 hover:bg-gray-300"}`,children:p},p))})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Appointment Reason:"}),e.jsx(Z,{name:"appointmentReasonCategory",control:c,rules:{required:"Appointment reason category is required"},render:({field:f})=>e.jsxs("select",{...f,onChange:p=>{f.onChange(p),F("appointmentReasonSubcategory","")},className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select a reason category"}),Object.keys(be).map(p=>e.jsx("option",{value:p,children:p},p))]})})]}),e.jsx(Z,{name:"appointmentReasonCategory",control:c,render:({field:f})=>e.jsx(e.Fragment,{children:f.value&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Specific Reason:"}),e.jsx(Z,{name:"appointmentReasonSubcategory",control:c,rules:{required:"Specific reason is required"},render:({field:p})=>e.jsxs("select",{...p,className:"w-full p-2 border rounded",children:[e.jsx("option",{value:"",children:"Select a specific reason"}),be[f.value].map(i=>e.jsx("option",{value:i,children:i},i))]})})]})})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx(Z,{name:"bookTranslation",control:c,render:({field:f})=>e.jsx("input",{type:"checkbox",onChange:p=>f.onChange(p.target.checked),checked:f.value,className:"form-checkbox h-5 w-5 text-blue-600 mr-2"})}),"Book Translation"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Check this if translation services for this appointment are needed."})]}),e.jsxs("div",{className:"flex justify-end",children:[e.jsx("button",{type:"button",onClick:a,className:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded mr-2",children:"Cancel"}),e.jsx("button",{type:"submit",className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",disabled:b,children:b?"Adding...":"Add Appointment"})]})]})]})})},je=()=>{const[n,a]=s.useState([]),[l,r]=s.useState(!0),[t,d]=s.useState(null),[o,S]=s.useState(!1);s.useState(null),s.useEffect(()=>{w()},[]);const w=async _=>{try{r(!0);let b=se.GET_ALL_APPOINTMENTS;_&&(b+=`?doctorId=${_}`);const L=await E.get(b);a(L.data),r(!1)}catch(b){console.error("Error fetching appointments:",b),d(ce.FETCH_FAILED),r(!1)}},k=()=>{S(!0)},y=()=>{S(!1),w()};return l?e.jsx("div",{children:"Loading..."}):t?e.jsx("div",{className:"error-message",children:t}):e.jsxs(te,{text:"Manage Appointments",children:[e.jsx("div",{className:"flex min-h-screen pb-20 justify-center w-full",children:e.jsx("div",{className:"flex flex-col gap-10 w-[86%] py-10",children:e.jsxs("div",{className:"p-6 w-full flex-flex-col gap-8 h-full bg-white shadow-custom rounded-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl text-blue-600 font-semibold",children:"Appointment"}),e.jsx("button",{onClick:k,className:"bg-blue-600 px-4 py-2 rounded-lg text-white hover:bg-blue-700 transition duration-300",children:"Add Appointment"})]}),e.jsx(pe,{appointments:n,fetchAppointments:w})]})})}),o&&e.jsx(Ee,{isOpen:o,onClose:()=>S(!1),onSubmit:y,sendby:"Admin"})]})},As=({isOpen:n,onClose:a})=>{const l=r=>{var d;const t={...r,address:{street:r.street,postcode:r.postcode,city:r.city,state:r.state,country:r.country},date_of_birth:r.date_of_birth?r.date_of_birth.toISOString().split("T")[0]:null,specialization_id:(d=r.specialization)==null?void 0:d.value,languages:r.languages.map(o=>o.value),role:"doctor"};E.post("/api/users/admin-create",t,{headers:{"Content-Type":"application/json"}}).then(o=>{a()}).catch(o=>{console.error("Registration error:",o)})};return n?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center",children:e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-xl w-2/3 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Add New Doctor"}),e.jsx("button",{onClick:a,className:"text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx(we,{handleSubmit:l,onClose:a})]})}):null},Es=()=>{const[n,a]=s.useState(!1),[l,r]=s.useState([]),[t,d]=s.useState(!0),[o,S]=s.useState(null),w=s.useCallback(async _=>{try{d(!0),S(null);const L=(await E.get(se.GET_DOCTORS,{params:{language:_}})).data.map(j=>{var D;return{userId:j.id,first_name:j.first_name,last_name:j.last_name,email:j.email,languages:j.languages.map(c=>({id:c.id,language_name:c.language_name})),title:j.title,specialization:{area_of_specialization:((D=j.specialization)==null?void 0:D.area_of_specialization)||"Not specified"},phone_number:j.phone_number,date_of_birth:new Date(j.date_of_birth),insurance:j.insurance_type}});r(L)}catch(b){console.error("Error fetching doctors:",b),S(ce.FETCH_FAILED)}finally{d(!1)}},[]);s.useEffect(()=>{w()},[w]);const k=()=>{a(!0)},y=()=>{a(!1),w()};return e.jsxs(te,{text:"Manage Doctors",children:[e.jsx("div",{className:"flex min-h-screen pb-20 justify-center w-full",children:e.jsx("div",{className:"flex flex-col gap-10 w-[86%] py-10",children:e.jsxs("div",{className:"p-6 w-full flex-flex-col gap-8 h-full bg-white shadow-custom rounded-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl text-blue-600 font-semibold",children:"Doctors"}),e.jsx("button",{onClick:k,className:"bg-blue-600 px-4 py-2 rounded-lg text-white hover:bg-blue-700 transition duration-300",children:"Add Doctor"})]}),e.jsx(Ce,{doctors:l,loading:t,error:o,onRefresh:w})]})})}),e.jsx(As,{isOpen:n,onClose:y})]})},ks=({isOpen:n,onClose:a,onConfirm:l,patientName:r,title:t="Patient"})=>n?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center",children:e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Confirm Deletion"}),e.jsxs("p",{children:["Are you sure you want to delete ",t," ",r,"?"]}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{onClick:a,className:"mr-2 px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Delete"})]})]})}):null,Ts=({isOpen:n,onClose:a,onUpdateSuccess:l})=>{const r=async t=>{try{const d={title:t.title,first_name:t.first_name,last_name:t.last_name,email:t.email,password:t.password,date_of_birth:t.date_of_birth?t.date_of_birth.toISOString().split("T")[0]:null,phone_number:t.phone_number,gender:t.gender,insurance_type:t.insurance_type||"public",address:{street:t.address.street,postcode:t.address.postcode,city:t.address.city,state:t.address.state,country:t.address.country},accessibility_needs:t.accessibility_needs||"none",emergency_contact_details:t.emergency_contact_details||null,languages:t.languages.map(w=>w.value)},o=localStorage.getItem("token"),S=await E.post("/api/auth/register",d,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`,Accept:"application/json"}});a(),l()}catch(d){console.error("Registration error:",d);let o="An unexpected error occurred";d.response?o=d.response.data.error||d.response.data.message||d.message:d.request?o="No response received from server":o=d.message,alert(`Registration failed: ${o}`)}};return n?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add New Patient"}),e.jsx("button",{onClick:a,className:"text-gray-600 hover:text-gray-800 transition-colors",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx(he,{handleSubmit:r,onClose:a})]})}):null},Ds=()=>{const[n,a]=s.useState([]),[l,r]=s.useState(!1),[t,d]=s.useState(null),{isAuthenticated:o,checkAuth:S,logout:w}=ie(),[k,y]=s.useState(!1),[_,b]=s.useState(!1),[L,j]=s.useState(!1),[D,c]=s.useState(null),u=async()=>{try{r(!0),d(null);const N=(await E.get(se.GET_PATIENTS)).data.map(x=>({userId:x.id,first_name:x.first_name,last_name:x.last_name,email:x.email,role:x.role,address:{street:x.address.street,city:x.address.city,state:x.address.state,country:x.address.country,postcode:x.address.postal_code},languages:x.languages.map(v=>({id:v.id,language_name:v.language_name})),title:x.title,phone_number:x.phone_number,date_of_birth:new Date(x.date_of_birth),insurance:x.insurance_type}));a(N)}catch(m){console.error("Error fetching Patients:",m),d(ce.FETCH_FAILED),m.response&&m.response.status===401&&w()}finally{r(!1)}};s.useEffect(()=>{o&&u()},[o]);const T=m=>{c(m),b(!0)},F=m=>{c(m),y(!0)},$=()=>{j(!0)},O=()=>{u()},I=()=>{b(!1),O()},g=async()=>{if(D)try{await E.delete(`/api/users/${D.userId}`),O()}catch(m){console.error("Error deleting patient:",m)}finally{y(!1)}};return l?e.jsx("div",{children:"Loading..."}):t?e.jsx("div",{className:"error-message",children:t}):e.jsxs(te,{text:"Manage Patients",children:[e.jsx("div",{className:"flex min-h-screen pb-20 justify-center w-full",children:e.jsx("div",{className:"flex flex-col gap-10 w-[86%] py-10",children:e.jsxs("div",{className:"p-6 w-full flex-flex-col gap-8 h-full bg-white shadow-custom rounded-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h1",{className:"text-2xl text-blue-600 font-semibold",children:"Patients"}),e.jsx("button",{onClick:$,className:"bg-blue-600 px-4 py-2 rounded-lg text-white hover:bg-blue-700 transition duration-300",children:"Add Patient"})]}),e.jsx(Ne,{patients:n,onEdit:T,onDelete:F})]})})}),e.jsx(ks,{isOpen:k,onClose:()=>y(!1),onConfirm:g,patientName:D?`${D.first_name} ${D.last_name}`:"",title:"patient"}),_&&D&&e.jsx(Se,{isOpen:_,onClose:I,patientId:D.userId,onUpdateSuccess:O}),e.jsx(Ts,{isOpen:L,onClose:()=>j(!1),onUpdateSuccess:O})]})};rs.register(is,os,cs,ds,us,ms,xs,hs);const Fs=()=>{const[n,a]=s.useState(null),[l,r]=s.useState(null),[t,d]=s.useState(null),[o,S]=s.useState(null),[w,k]=s.useState(!1),[y,_]=s.useState(null),b=oe(),L=s.useRef(null),j=new Date,D=new Date(j),c=new Date(j);D.setDate(j.getDate()-7),c.setDate(j.getDate()+7),s.useEffect(()=>(u(),()=>{L.current&&L.current.destroy()}),[]);const u=async()=>{try{k(!0);const[g,m,N,x]=await Promise.all([E.get("/api/search/doctors-count"),E.get("/api/search/users-count"),E.get("/api/users/all-users"),E.get("/api/appointments/")]);a(T(g.data)),r(T(m.data)),d(F(N.data)),S($(x.data))}catch(g){console.error("Error fetching data:",g),_(`Failed to fetch data: ${g instanceof Error?g.message:"Unknown error"}`)}finally{k(!1)}},T=g=>{const m=g.filter(v=>v.doctorCount>0||v.userCount>0),N=m.map(v=>v.language),x=m.map(v=>v.doctorCount||v.userCount);return{labels:N,datasets:[{data:x,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40","#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#FF9F40"]}]}},F=g=>{const m=g.length,N=new Date;N.setDate(N.getDate()-7);const x=g.filter(v=>{const f=new Date(v.createdAt);return!isNaN(f.getTime())&&f>=N}).length;return{totalUsers:m,newUsers:x}},$=g=>{const m=g.length,N=g.filter(R=>R.completed===!0).length,x=g.filter(R=>R.completed===!1).length,v={},f=new Date,p=new Date(f),i=new Date(f);p.setDate(f.getDate()-7),i.setDate(f.getDate()+7),g.forEach(R=>{const h=new Date(R.date);if(!isNaN(h.getTime())&&h>=p&&h<=i){const M=h.toISOString().split("T")[0];v[M]=(v[M]||0)+1}});const z=Object.keys(v).sort((R,h)=>new Date(R).getTime()-new Date(h).getTime()),P=z.map(R=>v[R]);return{totalAppointments:m,completedAppointments:N,pendingAppointments:x,appointmentsByDay:v,sortedDates:z,appointmentCounts:P}},O=(g,m)=>{if(m.length>0){const N=m[0].index,x=n.labels[N];b(`/doctors?language=${x}`)}},I=(g,m)=>{if(m.length>0){const N=m[0].index,x=l.labels[N];b(`/patients?language=${x}`)}};return w?e.jsx("div",{children:"Loading..."}):y?e.jsxs("div",{children:["Error: ",y]}):e.jsx(te,{text:"Dashboard",children:e.jsxs("div",{className:"grid grid-cols-2 gap-8 p-4",children:[e.jsxs("div",{className:"p-6 bg-white shadow-custom rounded-2xl",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Total Users"}),e.jsx("p",{className:"text-center text-3xl font-bold",children:t==null?void 0:t.totalUsers})]}),e.jsxs("div",{className:"p-6 bg-white shadow-custom rounded-2xl",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"New Users (Last 7 Days)"}),e.jsx("p",{className:"text-center text-3xl font-bold",children:t==null?void 0:t.newUsers})]}),e.jsxs("div",{className:"p-6 bg-white shadow-custom rounded-2xl",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Doctors by Language"}),n&&e.jsx("div",{className:"h-64",children:e.jsx(ue,{data:n,options:{maintainAspectRatio:!1,onClick:O,plugins:{legend:{position:"right"}}}})})]}),e.jsxs("div",{className:"p-6 bg-white shadow-custom rounded-2xl",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Patients by Language"}),l&&e.jsx("div",{className:"h-64",children:e.jsx(ue,{data:l,options:{maintainAspectRatio:!1,onClick:I,plugins:{legend:{position:"right"}}}})})]}),e.jsxs("div",{className:"p-6 bg-white shadow-custom rounded-2xl",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Total Appointments"}),e.jsx("p",{className:"text-center text-3xl font-bold",children:o==null?void 0:o.totalAppointments})]}),e.jsxs("div",{className:"p-6 bg-white shadow-custom rounded-2xl",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Appointments by Day"}),e.jsx("div",{className:"h-64",children:e.jsx(ls,{ref:L,data:{labels:o==null?void 0:o.sortedDates,datasets:[{label:"Appointments",data:o==null?void 0:o.appointmentCounts,backgroundColor:"rgba(75, 192, 192, 0.6)"}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{type:"time",time:{unit:"day",displayFormats:{day:"yyyy-MM-dd"}},title:{display:!0,text:"Date"}},y:{beginAtZero:!0,ticks:{stepSize:1},title:{display:!0,text:"Number of Appointments"}}}}})})]}),e.jsxs("div",{className:"col-span-2 p-6 bg-white shadow-custom rounded-2xl",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4 text-center",children:"Appointment Status"}),e.jsx("div",{className:"h-64",children:e.jsx(ue,{data:{labels:["Completed","Pending"],datasets:[{data:[o==null?void 0:o.completedAppointments,o==null?void 0:o.pendingAppointments],backgroundColor:["#36A2EB","#FFCE56"]}]},options:{maintainAspectRatio:!1,plugins:{legend:{position:"right"}}}})})]})]})})},Ps=()=>e.jsx("div",{children:e.jsxs("div",{className:"flex flex-row bg-blue-600 h-[470px] rounded-bl-3xl",children:[e.jsxs("div",{className:"pl-20 pl:lgl-32 w-[60%]  h-full flex flex-col gap-9 justify-center",children:[e.jsxs("div",{className:"px-2 flex flex-col text-white font-medium text-3xl inter",children:["Find or book an",e.jsx("p",{className:"inter semi-bold",children:"appointment"})]}),e.jsxs("div",{className:"bg-white gap-1.5 px-3 flex items-center flex-row rounded-3xl h-14 w-full",children:[e.jsx(Oe,{size:24}),e.jsx("input",{type:"text",className:"w-full outline-none",placeholder:"Name, field of expertise, institution"})]})]}),e.jsx("div",{className:"w-[40%] flex items-end justify-end",children:e.jsx("img",{src:"/src/assets/img/doctors-grid/bg-preview.png",alt:"",className:"h-[400px]"})})]})}),Ls="data:image/svg+xml,%3csvg%20width='72'%20height='80'%20viewBox='0%200%2072%2080'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M71.9034%2077.5016V28.5713V16.428V16.0318C71.9034%2015.3674%2071.6443%2014.7635%2071.2218%2014.3159C71.1344%2014.1947%2071.0392%2014.0784%2070.9364%2013.9679L65.776%208.4209L65.1762%208.69157L63.7504%2013.5337H8.02665C6.64892%2013.5337%205.53204%2014.6522%205.53204%2016.0319V60.872H0.666814L0.172889%2071.8795C0.12446%2072.9873%200.587267%2074.3461%201.42797%2075.0677L6.07219%2079.0542C6.27061%2079.3043%206.5159%2079.5155%206.79477%2079.6744L6.82343%2079.699L6.82585%2079.6918C7.18208%2079.8881%207.59135%2079.9998%208.02666%2079.9998H69.4088C70.7865%2079.9998%2071.9034%2078.8813%2071.9034%2077.5016Z'%20fill='%2300264C'/%3e%3crect%20x='0.0961914'%20y='7.63916'%20width='66.3113'%20height='66.4059'%20rx='2.40964'%20fill='%2300BFFF'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M11.2982%202.40601C11.2982%201.07721%2012.3739%200%2013.7008%200H21.3891C22.716%200%2023.7917%201.07721%2023.7917%202.40601V7.63909H42.8922V2.40601C42.8922%201.07721%2043.9679%200%2045.2948%200H52.983C54.3099%200%2055.3856%201.07721%2055.3856%202.40601V7.63909H64.0049C65.3318%207.63909%2066.4075%208.7163%2066.4075%2010.0451V28.812H0.0961914V10.0451C0.0961914%208.7163%201.17186%207.63909%202.49877%207.63909H11.2982V2.40601Z'%20fill='%23107ACA'/%3e%3cpath%20d='M11.3906%2037.47C11.3906%2036.8046%2011.93%2036.2651%2012.5954%2036.2651H20.7882C21.4536%2036.2651%2021.993%2036.8046%2021.993%2037.47V45.6627C21.993%2046.3281%2021.4536%2046.8675%2020.7882%2046.8675H12.5954C11.93%2046.8675%2011.3906%2046.3281%2011.3906%2045.6627V37.47Z'%20fill='%23107ACA'/%3e%3cpath%20d='M11.3906%2054.0959C11.3906%2053.4305%2011.93%2052.8911%2012.5954%2052.8911H20.7882C21.4536%2052.8911%2021.993%2053.4305%2021.993%2054.0959V62.2887C21.993%2062.9541%2021.4536%2063.4935%2020.7882%2063.4935H12.5954C11.93%2063.4935%2011.3906%2062.9541%2011.3906%2062.2887V54.0959Z'%20fill='%23FFCD4D'/%3e%3cpath%20d='M28.3184%2054.0964C28.3184%2053.431%2028.8578%2052.8916%2029.5232%2052.8916H37.7159C38.3813%2052.8916%2038.9208%2053.431%2038.9208%2054.0964V62.2892C38.9208%2062.9546%2038.3813%2063.494%2037.7159%2063.494H29.5232C28.8578%2063.494%2028.3184%2062.9546%2028.3184%2062.2892V54.0964Z'%20fill='%23107ACA'/%3e%3cpath%20d='M45.2461%2054.0964C45.2461%2053.431%2045.7855%2052.8916%2046.4509%2052.8916H54.6437C55.3091%2052.8916%2055.8485%2053.431%2055.8485%2054.0964V62.2892C55.8485%2062.9546%2055.3091%2063.494%2054.6437%2063.494H46.4509C45.7855%2063.494%2045.2461%2062.9546%2045.2461%2062.2892V54.0964Z'%20fill='white'/%3e%3cpath%20d='M28.3184%2037.47C28.3184%2036.8046%2028.8578%2036.2651%2029.5232%2036.2651H37.7159C38.3813%2036.2651%2038.9208%2036.8046%2038.9208%2037.47V45.6627C38.9208%2046.3281%2038.3813%2046.8675%2037.7159%2046.8675H29.5232C28.8578%2046.8675%2028.3184%2046.3281%2028.3184%2045.6627V37.47Z'%20fill='white'/%3e%3c/svg%3e",Is="data:image/svg+xml,%3csvg%20width='106'%20height='80'%20viewBox='0%200%20106%2080'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M52.6854%206.83414C47.5535%201.70223%2033.4832%20-5.47238%2018.094%206.65344C17.9448%206.77104%2017.8054%206.90361%2017.6725%207.03944C17.6277%207.08523%2017.5777%207.13599%2017.5227%207.19173C14.5312%2010.2242%20-3.00204%2027.9978%2025.9502%2060.5259C30.6803%2065.4933%2042.6495%2076.3424%2052.6854%2079.9999V79.9811L52.689%2079.9999C62.7249%2076.3424%2074.694%2065.4933%2079.4241%2060.5259C108.376%2027.9978%2090.8432%2010.2242%2087.8517%207.19173C87.7967%207.13599%2087.7466%207.08523%2087.7018%207.03944C87.569%206.90361%2087.4296%206.77104%2087.2803%206.65344C71.8911%20-5.47238%2057.8209%201.70223%2052.689%206.83414L52.6854%206.85233V6.83414Z'%20fill='%2300BFFF'/%3e%3cpath%20d='M54.6982%2028.2612L51.5835%2039.5958C50.8107%2042.4082%2047.5499%2043.686%2045.0721%2042.1473L35.2008%2036.0176L24.5269%2042.8229C23.8259%2043.2698%2023.0118%2043.5073%2022.1804%2043.5073H4.0314C2.31972%2043.5073%200.932129%2042.1197%200.932129%2040.408C0.932129%2038.6963%202.31972%2037.3087%204.0314%2037.3087H21.6456L32.8414%2030.1706C34.2569%2029.2682%2036.0645%2029.2574%2037.4905%2030.143L46.2569%2035.5866L50.7681%2019.1699C51.987%2014.7342%2058.352%2014.9579%2059.2566%2019.4681L65.228%2049.2412L71.4291%2040.001C72.2579%2038.766%2073.5606%2038.0698%2074.9272%2038.0444V38.0437H94.84V44.6297H76.2444L67.9206%2056.3525C65.7579%2059.5752%2060.7799%2058.5839%2060.0167%2054.7786L54.6982%2028.2612Z'%20fill='%23107ACA'/%3e%3cellipse%20cx='97.1644'%20cy='41.5306'%20rx='7.90314'%20ry='7.67069'%20fill='%23FFCD4D'/%3e%3c/svg%3e",Ms="data:image/svg+xml,%3csvg%20width='92'%20height='80'%20viewBox='0%200%2092%2080'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M19.1183%2040.2397C17.0638%2040.4285%2015.6673%2042.4128%2016.1831%2044.4105L17.6934%2050.2601C15.8261%2050.622%2014.6079%2052.4965%2015.0949%2054.383L21.0607%2077.489C21.4697%2079.0731%2022.9636%2080.1295%2024.5933%2079.9873L33.1222%2079.2431C35.1922%2079.0624%2036.5994%2077.0595%2036.0675%2075.0509L34.5258%2069.2282C36.4206%2068.8829%2037.66%2066.9832%2037.1556%2065.0784L31.0309%2041.9476C30.6127%2040.3681%2029.1154%2039.3212%2027.4883%2039.4707L19.1183%2040.2397Z'%20fill='%2300264C'/%3e%3cpath%20d='M20.1377%2019.0317H44.7178C47.5624%2019.0317%2050.5009%2018.6775%2053.2416%2017.9158C60.3868%2015.93%2074.6335%2011.2021%2079.7302%202.67822V69.8872C74.6335%2061.3633%2060.3868%2056.6354%2053.2416%2054.6496C50.5009%2053.8879%2047.5624%2053.5337%2044.7178%2053.5337H20.1377V19.0317Z'%20fill='%2300BFFF'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M10.2138%2018.999C8.3648%2018.999%206.86589%2020.4979%206.86589%2022.3469V24.1043H3.73266C1.88367%2024.1043%200.384766%2025.6032%200.384766%2027.4522V45.1123C0.384766%2046.9613%201.88367%2048.4602%203.73266%2048.4602H6.86589V50.2181C6.86589%2052.0671%208.3648%2053.566%2010.2138%2053.566H25.1592V18.999H10.2138Z'%20fill='%2300264C'/%3e%3cpath%20d='M81.3203%2030.4656C81.3203%2028.6166%2082.8192%2027.1177%2084.6682%2027.1177H88.2672C90.1162%2027.1177%2091.6151%2028.6166%2091.6151%2030.4656V42.0995C91.6151%2043.9485%2090.1162%2045.4474%2088.2672%2045.4474H84.6682C82.8192%2045.4474%2081.3203%2043.9485%2081.3203%2042.0995V30.4656Z'%20fill='%23FFCD4D'/%3e%3cpath%20d='M79.73%203.3479C79.73%201.49891%2081.2289%200%2083.0779%200H83.1616C85.0106%200%2086.5095%201.4989%2086.5095%203.34789V69.3014C86.5095%2071.1504%2085.0106%2072.6493%2083.1616%2072.6493H83.0779C81.2289%2072.6493%2079.73%2071.1504%2079.73%2069.3014V3.3479Z'%20fill='%23107ACA'/%3e%3c/svg%3e",Rs=()=>e.jsxs("div",{className:"h-screen p-20 flex flex-col gap-11",children:[e.jsx("h1",{className:"font-semibold text-2xl text-center",children:"We are at the service of your health."}),e.jsxs("div",{className:"flex flex-col gap-10 w-full items-center",children:[e.jsxs("div",{className:"flex flex-row items-center justify-center gap-20",children:[e.jsxs("div",{className:"items-center max-w-[340px] justify-center flex flex-col gap-5",children:[e.jsx("img",{src:Ls,alt:""}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{children:"Get"})," ",e.jsx("span",{className:"font-semibold",children:"easy and quick access to "}),e.jsx("span",{className:"text-blue-600",children:"many doctors and therapists."})]})]}),e.jsxs("div",{className:"items-center max-w-[340px] justify-center flex flex-col gap-5",children:[e.jsx("img",{src:Is,alt:""}),e.jsxs("div",{className:"text-center",children:[e.jsx("span",{children:"Manage your"})," ",e.jsx("span",{className:"font-semibold",children:"appointments"}),e.jsxs("span",{children:[" and opt in for the ",e.jsx("span",{className:"font-semibold",children:"translation service "}),"to get ",e.jsx("span",{className:"font-semibold",children:"real time translation during your appointment."})]})]})]})]}),e.jsxs("div",{className:"items-center max-w-[240px] justify-center flex flex-col gap-4",children:[e.jsx("img",{src:Ms,alt:""}),e.jsxs("div",{className:"text-center",children:["Learn about ",e.jsx("span",{className:"font-bold",children:"health precautions"})," to protect yourself and stay healthy."]})]})]}),e.jsxs("div",{className:"flex flex-row items-center justify-center mt-8 gap-4",children:[e.jsx("h1",{className:"text-3xl font-bold text-blue-900",children:"Health Connect in the future"}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("h2",{className:"font-semibold text-2xl text-blue-500",children:"millions of"}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("span",{className:"",children:"Patients"}),e.jsx(de,{})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("h2",{className:"font-semibold text-2xl text-blue-500",children:"thousands of"}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("span",{className:"",children:"Healthcare Providers"}),e.jsx(de,{})]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("h2",{className:"font-semibold text-2xl text-blue-500",children:"with about 97%"}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("span",{className:"",children:"satisfaction"}),e.jsx(de,{})]})]})]})]}),$s=()=>e.jsx("div",{className:"px-20 pb-10 w-full",children:e.jsxs("div",{className:"h-[420px] w-full rounded-3xl bg-blue-50 flex flex-row items-center p-8",children:[e.jsx("div",{className:"w-1/2 flex h-full px-8 items-center justify-center",children:e.jsx("div",{className:"h-[380px] flex items-center"})}),e.jsxs("div",{className:"w-1/2 flex flex-col items-start justify-center gap-6",children:[e.jsxs("div",{className:"",children:[e.jsx("div",{className:"h-[280px] flex items-center"}),"making your healthcare experience easy, stress-free and convenient is our top priority and one of our most important tasks."]}),e.jsx("div",{className:"px-5 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:cursor-pointer transition duration-200",children:"MORE INFORMATION"})]})]})}),Os=()=>e.jsxs("div",{className:"px-20 py-20 flex flex-col gap-16",children:[e.jsx("div",{className:"bg-blue-50 flex flex-row items-center justify-between p-8 rounded-2xl",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-8",children:[e.jsx("h1",{className:"font-semibold text-2xl text-lg",children:"Health Connect is hiring"}),e.jsx("span",{children:"Work with us to improve healthcare."}),e.jsx("div",{className:" px-3 py-1.5 text-blue-500 font-medium border border-blue-500 hover:bg-blue-500 hover:text-white hover:cursor-pointer transition duration-300 rounded-lg",children:"JOIN IN"})]})}),e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("span",{className:"font-semibold",children:"Do you have a question or need help?"}),e.jsx("span",{children:"Get answers to frequently asked questions in our help section"})]}),e.jsxs("div",{className:"flex flex-row items-center gap-1 px-5 py-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 hover:cursor-pointer transition duration-200",children:[e.jsx(ze,{}),e.jsx("span",{className:"font-semibold",children:"ACCESS HELP AREA"})]})]})]}),zs=()=>e.jsxs("div",{className:"mx-20 py-8 border-t-2 border-blue-50 flex flex-col gap-10",children:[e.jsxs("div",{className:"flex flex-row items-center gap-14",children:[e.jsx("h1",{className:"text-blue-400 text-3xl italia font-semibold",children:"Health Connect"}),e.jsx("span",{className:"text-gray-500",children:"Copyright © 2024 Health Connect, All rights reserved."})]}),e.jsxs("div",{className:"flex flex-row gap-10",children:[e.jsxs("div",{className:"flex flex-col w-48 gap-6",children:[e.jsx("h1",{className:"font-medium text-blue-900",children:"Our company"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{children:"About us"}),e.jsx("span",{children:"Health"})]})]}),e.jsxs("div",{className:"flex flex-col w-48 gap-6",children:[e.jsx("h1",{className:"font-medium text-blue-900",children:"Find your specialist"}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{children:"Orthopädie und Unfallchirurgie"}),e.jsx("span",{children:"Allgemeinmedizin (Hausarzt)"}),e.jsx("span",{children:"Neurologie"}),e.jsx("span",{children:"Frauenheilkunde und Geburtshilfe"}),e.jsx("span",{children:"Innere Medizin und Kardiologie"})]}),e.jsx("span",{children:"All specialties"})]}),e.jsxs("div",{className:"flex flex-col w-48 gap-6",children:[e.jsx("h1",{className:"font-medium text-blue-900",children:"For health professionals"}),e.jsx("div",{className:"flex flex-col gap-1",children:e.jsx("span",{children:"Health Connect Community"})})]})]}),e.jsxs("div",{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex flex-row items-center gap-14",children:[e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Country:"}),e.jsx("span",{children:"Deutschland"})]}),e.jsxs("div",{className:"flex flex-row items-center gap-2",children:[e.jsx("span",{className:"font-semibold",children:"Language:"}),e.jsx("span",{children:"English"})]})]}),e.jsxs("div",{className:"flex text-2xl hover:cursor-pointer text-blue-500 flex-row gap-4",children:[e.jsx(Ue,{}),e.jsx(He,{}),e.jsx(Be,{}),e.jsx(Ve,{}),e.jsx(Ge,{})]})]})]}),Us=()=>{const[n,a]=s.useState(!1),l=()=>{a(!n)};return e.jsx("div",{className:"bg-blue-600 w-full h-16 items-center flex px-20",children:e.jsxs("div",{className:"flex flex-row justify-between w-full",children:[e.jsx(le,{to:"/",className:"z-10 flex flex-row items-center inter text-white font-medium text-2xl",children:e.jsx("h1",{children:"Health Connect"})}),n&&e.jsx("div",{onClick:l,className:"w-full z-2 fixed hover:cursor-pointer h-screen top-0 left-0 right-0 bottom-0"}),e.jsxs("div",{className:"flex flex-row items-center gap-6",children:[e.jsxs("div",{onClick:l,className:"flex transition duration-300 ease-in pb-2 hover:cursor-pointer hover:bg-[#f1f1f1aa] p-2 py-1 rounded-lg z-10 items-center gap-1",children:[e.jsx(qe,{color:"white"}),e.jsx("div",{className:"text-white text-sm inter",children:"Help center"})]}),n&&e.jsx(Hs,{}),e.jsxs("div",{className:"flex flex-row items-center gap-4",children:[e.jsx(le,{to:"/signup",className:"z-10 text-white transition duration-300 ease-in pb-2 hover:cursor-pointer hover:bg-[#f1f1f1aa] p-2 py-1 rounded-lg text-sm inter",children:"Register"}),e.jsx(le,{to:"/signin",className:"z-10 text-white transition duration-300 ease-in pb-2 hover:cursor-pointer hover:bg-[#f1f1f1aa] p-2 py-1 rounded-lg text-sm inter",children:"Sign in"}),e.jsx(le,{to:"/admindashboard",className:"z-10 text-white transition duration-300 ease-in pb-2 hover:cursor-pointer hover:bg-[#f1f1f1aa] p-2 py-1 rounded-lg text-sm inter",children:"Admin"})]})]})]})})},Hs=()=>e.jsx(ps,{children:e.jsx(gs.div,{initial:{opacity:0,scale:.2},animate:{opacity:1,scale:1},transition:{duration:.6,ease:[0,.71,.2,1.01]},exit:{opacity:0,scale:.2},className:"absolute h-40 z-3",children:e.jsx("div",{className:"w-[320px] p-4 ml-[-200px] mt-[120px] rounded-lg bg-white",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"flex flex-row gap-1 items-center",children:[e.jsx("div",{className:"rounded-full flex items-center border-black justify-center w-4 h-4 border-2",children:e.jsx("div",{className:"text-[12px] text-black font-bold",children:"?"})}),e.jsx("h1",{className:"font-medium",children:"Frequently Asked Questions"})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(le,{to:"/sign-up",className:"hover:underline transition duration-200 ease-in-out",children:"Create a Health Connect account"}),e.jsx("span",{children:"How can I make an appointment?"}),e.jsx("span",{children:"Share a document with my doctor"})]}),e.jsx("div",{className:"text-blue-400",children:"Visit Help Center"})]})})})}),Bs=()=>e.jsxs("div",{className:"h-full min-h-[100vh]",children:[e.jsx(Us,{}),e.jsx(Ps,{}),e.jsx(Rs,{}),e.jsx($s,{}),e.jsx(Os,{}),e.jsx(zs,{})]}),Vs=()=>{const n=oe(),a=async r=>{try{const t={title:r.title,first_name:r.first_name,last_name:r.last_name,email:r.email,password:r.password,date_of_birth:r.date_of_birth?r.date_of_birth.toISOString().split("T")[0]:null,phone_number:r.phone_number,gender:r.gender,insurance_type:r.insurance_type||"public",address:{street:r.address.street,postcode:r.address.postcode,city:r.address.city,state:r.address.state,country:r.address.country},accessibility_needs:r.accessibility_needs||"none",emergency_contact_details:r.emergency_contact_details||null,language:r.languages.values},d=localStorage.getItem("token"),o=await E.post("/api/auth/register",t,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`,Accept:"application/json"}});n("/signin")}catch(t){console.error("Registration error:",t),t.response?(console.error("Response data:",t.response.data),console.error("Response status:",t.response.status),console.error("Response headers:",t.response.headers),alert(`Registration failed: ${t.response.data.error||t.response.data.message||t.message}`)):t.request?(console.error("No response received:",t.request),alert("Registration failed: No response received from server")):(console.error("Error message:",t.message),alert(`Registration failed: ${t.message}`))}},l=()=>{n("/")};return e.jsxs("div",{className:"min-h-screen w-full bg-blue-50",children:[e.jsx(xe,{text:""}),e.jsx("div",{className:"container mx-auto px-4 py-10 flex justify-center items-center",children:e.jsxs("div",{className:"w-full max-w-3xl bg-white rounded-2xl px-8 py-10 shadow-custom",children:[e.jsx("h1",{className:"text-center text-blue-600 font-semibold text-3xl mb-8",children:"Register"}),e.jsx(he,{handleSubmit:a,onClose:l})]})})]})},Gs=[{name:"Muhsina Karim",type:"FIRST VISIT",time:"12:00 PM"},{name:"Wagner Meyer",type:"EMERGENCY",time:"11:00 AM"},{name:"Bauer Koch",type:"CONSULTANCY",time:"10:00 AM"},{name:"Fischer Wagner",type:"FIRST VISIT",time:"1:00 PM"},{name:"Schneider Bauer",type:"EMERGENCY",time:"1:00 PM"},{name:"Muller Koch",type:"CONSULTANCY",time:"11:00 AM"}],qs=()=>{const[n,a]=s.useState("");return e.jsx(te,{text:"Dashboard",children:e.jsxs("div",{className:"h-[96vh] flex flex-row",children:[e.jsxs("div",{className:"w-[70%] py-10 px-14 gap-6 flex flex-col ",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-semibold text-blue-500",children:"Welcome Dr. Mary!"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("span",{children:["You have ",e.jsx("strong",{children:"20 patients "}),"remaining!"]}),e.jsx("span",{children:"Don't forget to check the documentation before the call."})]})]}),e.jsxs("div",{className:"flex flex-row gap-10",children:[e.jsxs("div",{className:"flex flex-col gap-4 w-[60%] bg-blue-50 p-4 rounded-3xl",children:[e.jsx("h1",{className:"font-semibold text-xl",children:"Today's Appointments"}),e.jsx("div",{className:"flex flex-col gap-2",children:Gs.map((l,r)=>e.jsxs("div",{className:"flex flex-row items-center justify-between border-b border-blue-100",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h1",{children:l.name}),e.jsx("span",{className:`${l.type==="FIRST VISIT"&&"text-blue-400"} ${l.type==="EMERGENCY"&&"text-red-400"} ${l.type==="CONSULTANCY"&&"text-green-300"}`,children:l.type})]}),e.jsx("div",{children:l.time})]},r))})]}),e.jsxs("div",{className:"flex flex-col gap-4 w-[40%] max-h-[300px] shadow-custom rounded-3xl p-4",children:[e.jsx("h1",{className:"text-2xl text-blue-400 font-medium",children:"Reminders"}),e.jsx("div",{className:"border border-gray-300 p-2 h-full rounded-2xl",children:e.jsx("textarea",{"aria-expanded":!0,placeholder:"Nothing to show :)",className:"outline-none resize-none text-lg h-full flex text-start justify-start w-full",value:n,onChange:l=>a(l.target.value)})})]})]})]}),e.jsxs("div",{className:"w-[30%] gap-4 py-10 bg-blue-50 rounded-l-3xl h-[600px] rounded-br-3xl flex flex-col px-8",children:[e.jsx("div",{className:"flex items-center justify-center ",children:e.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSkmcKwKPohdSJKvyQ0Sv1S8i93hbJbuIkOJQ&s",alt:"Dr. Mary John",className:"rounded-full w-28 h-28"})}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-0.5",children:[e.jsx("h1",{className:"font-semibold text-2xl",children:"Dr. Mary John"}),e.jsx("span",{children:"Cardiologist"})]}),e.jsxs("div",{className:"flex mt-10 flex-col gap-2",children:[e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx(Ye,{}),e.jsx("span",{children:"maryjohn.doc@gmail.com"})]}),e.jsxs("div",{className:"flex flex-row items-center gap-1",children:[e.jsx(We,{}),e.jsx("span",{children:"(+49) 163 555 1584"})]})]}),e.jsxs("div",{className:"flex flex-row gap-10",children:[e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("h2",{className:"text-gray-600",children:"Overall Rating"}),e.jsx("h1",{className:"font-medium",children:"4.4"})]}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[e.jsx("h2",{className:"text-gray-600",children:"Total patients"}),e.jsx("h1",{className:"font-medium",children:"198"})]})]})]})]})})},Ys=({isOpen:n,onClose:a,onConfirm:l})=>n?e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex justify-center items-center",children:e.jsxs("div",{className:"bg-white p-5 rounded-lg shadow-xl",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Changing Translation Service"}),e.jsx("p",{children:"With the booking of our translation service you agree to sharing your data with our partner."}),e.jsxs("div",{className:"mt-4 flex justify-end",children:[e.jsx("button",{onClick:a,className:"mr-2 px-4 py-2 bg-gray-300 text-gray-800 rounded hover:bg-gray-400",children:"Cancel"}),e.jsx("button",{onClick:l,className:"px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600",children:"Confirm"})]})]})}):null,Ws=({onClose:n,appointment:a})=>a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center overflow-y-auto",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg max-w-6xl w-full m-4",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"View Appointment"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-700",children:"Doctor:"})," ",a.doctor.title," ",a.doctor.first_name," ",a.doctor.last_name]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-700",children:"Specialization:"})," ",a.doctor.specialization.area_of_specialization]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-700",children:"Address:"})," ",`${a.doctor.address.street}, ${a.doctor.address.postcode} ${a.doctor.address.city}, ${a.doctor.address.state}`]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-700",children:"Date:"})," ",new Date(a.appointmentDate).toLocaleDateString()]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-700",children:"Time:"})," ",new Date(a.appointmentDate).toLocaleTimeString()]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-700",children:"Reason:"})," ",a.appointmentReason?`${a.appointmentReason.reason||"N/A"} - ${a.appointmentReason.notes||"N/A"}`:"No reason specified"]}),e.jsxs("p",{children:[e.jsx("strong",{className:"text-gray-700",children:"Translation Booked:"})," ",a.bookTranslation?"Yes":"No"]})]}),e.jsx("div",{className:"flex justify-end space-x-4 mt-6",children:e.jsx("button",{onClick:n,className:"px-6 py-2 bg-gray-300 text-black rounded-lg hover:bg-gray-400 transition duration-200",children:"Close"})})]})}):null,Zs=()=>{const[n,a]=s.useState([]),[l,r]=s.useState([]),{userData:t}=ie(),[d,o]=s.useState(!1),[S,w]=s.useState(!1),[k,y]=s.useState(null),[_,b]=s.useState(null),[L,j]=s.useState(!1),[D,c]=s.useState(null),[u,T]=s.useState(0),[F,$]=s.useState(0),[O,I]=s.useState(!1),[g,m]=s.useState(null),[N,x]=s.useState(!1),[v,f]=s.useState(null),p=async()=>{try{const C=await E.get("/api/appointments/user-appointments");if(C.data&&Array.isArray(C.data)){const H=C.data.map(A=>({id:A.id,appointmentDate:A.availability.availability_date,appointmentReason:{reason:A.appointment_reason.reason,notes:A.appointment_reason.notes},bookTranslation:A.book_translation,completed:A.completed,doctor:{userId:A.doctor_id,id:A.doctor_id,first_name:A.doctor.first_name,last_name:A.doctor.last_name,title:A.doctor.title,address:A.doctor.address,specialization:A.doctor.specialization,email:"",role:"doctor",languages:[],phone_number:"",date_of_birth:new Date,gender:""},patient:{userId:A.user_id,first_name:"",last_name:"",address:{street:"",city:"",state:"",country:"",postcode:""},languages:[],email:"",role:"patient",phone_number:"",date_of_birth:new Date,gender:"",insurance:""},availability:{id:A.availability_id,doctor_id:A.doctor_id,availability_date:A.availability.availability_date,active:!0}}));a(H)}else console.error("Unexpected response format for appointments:",C.data)}catch(C){console.error("Error fetching appointments:",C)}},i=async()=>{try{x(!0);const C=await E.get(`/api/appointments/user-doctors/${t==null?void 0:t.userId}`);if(C.data&&Array.isArray(C.data)){const H=C.data.map(A=>{var J,Y,Q,ae,ne,ge;return{userId:A.id,id:A.id,title:A.doctor_name.split(" ")[0]||"",first_name:A.doctor_name.split(" ")[1]||"",last_name:A.doctor_name.split(" ").slice(2).join(" ")||"",email:A.email||"",role:"doctor",address:{street:((J=A.address)==null?void 0:J.street)||"",city:((Y=A.address)==null?void 0:Y.city)||"",state:((Q=A.address)==null?void 0:Q.state)||"",country:((ae=A.address)==null?void 0:ae.country)||"",postcode:((ne=A.address)==null?void 0:ne.postal_code)||""},languages:A.languages.map(ke=>({language_name:ke,id:0})),phone_number:A.phone_number||"",date_of_birth:A.date_of_birth?new Date(A.date_of_birth):void 0,gender:A.gender||"",specialization:{id:((ge=A.specialization)==null?void 0:ge.id)||0,area_of_specialization:A.area_of_specialization||"Not specified"}}});r(H)}else console.error("Unexpected response format for doctors:",C.data),f("Failed to fetch doctors. Unexpected data format.")}catch(C){console.error("Error fetching doctors:",C),f("Failed to fetch doctors. Please try again.")}finally{x(!1)}};s.useEffect(()=>{t&&(p(),i())},[t]);const z=()=>{o(!1),alert("Appointment successfully added"),p()},P=async()=>{if(D!==null)try{await E.delete(`/api/appointments/${D}`),a(C=>C.filter(H=>H.id!==D))}catch(C){console.error("Error deleting appointment:",C)}finally{j(!1),c(null)}},R=()=>{b(null),w(!1)},h=()=>{alert("This function is not available yet for patients.")},M=C=>{b(C),j(!0)},V=C=>{b(C),w(!0)},q=C=>{m(C),I(!0)},U=async C=>{try{const H=!C.bookTranslation,A=await E.put(`/api/appointments/${C.id}`,{book_translation:H});A.status===200||A.status===201?await p():console.error("PUT request failed. Status:",A.status)}catch(H){console.error("Error in toggleBookTranslation:",H)}},G=(C,H,A,J)=>e.jsxs("div",{className:"relative w-full overflow-hidden",children:[e.jsx("div",{className:"flex transition-transform duration-300 ease-in-out",style:{transform:`translateX(-${H*100}%)`},children:C.map((Y,Q)=>e.jsx("div",{className:"w-full flex-shrink-0",children:J(Y)},Q))}),e.jsx("button",{onClick:()=>A(Y=>Math.max(0,Y-1)),className:"absolute left-0 top-1/2 transform -translate-y-1/2 bg-white p-2 rounded-full shadow-md z-10",disabled:H===0,children:e.jsx(Ze,{})}),e.jsx("button",{onClick:()=>A(Y=>Math.min(C.length-1,Y+1)),className:"absolute right-0 top-1/2 transform -translate-y-1/2 bg-white p-2 rounded-full shadow-md z-10",disabled:H===C.length-1,children:e.jsx(Ke,{})})]}),ee=C=>{const H=new Date(C.appointmentDate),A=Math.ceil((H.getTime()-new Date().getTime())/(1e3*60*60*24));return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg m-2",children:[e.jsxs("h3",{className:"text-xl font-semibold mb-2",children:[C.doctor.title," ",C.doctor.first_name," ",C.doctor.last_name]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Je,{className:"mr-2 text-blue-500"}),e.jsx("span",{children:H.toDateString()})]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Qe,{className:"mr-2 text-blue-500"}),e.jsx("span",{children:`${C.doctor.address.street}, ${C.doctor.address.postcode} ${C.doctor.address.city}, ${C.doctor.address.state}`})]}),e.jsxs("p",{className:"text-blue-600 font-semibold",children:["Appointment in ",A," day",A!==1?"s":""]}),e.jsxs("div",{className:"mt-4 flex justify-between",children:[e.jsx("button",{onClick:()=>q(C),className:"text-blue-500 hover:text-blue-700",children:C.bookTranslation?e.jsx(Xe,{}):e.jsx(es,{})}),e.jsx("button",{onClick:()=>V(C),className:"text-blue-500 hover:text-blue-700",children:e.jsx(ss,{})}),e.jsx("button",{onClick:()=>M(C),className:"text-red-500 hover:text-red-700",children:e.jsx(ts,{})})]}),C.bookTranslation&&e.jsx("button",{onClick:()=>alert("Calling Translator..."),className:"mt-2 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition duration-300 w-full",children:"Call Translator"})]})},B=C=>{var H;return e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg m-2",children:[" ",e.jsxs("h3",{className:"text-xl font-semibold mb-2",children:[C.title," ",C.first_name," ",C.last_name]}),e.jsx("p",{className:"text-gray-600 mb-2",children:((H=C.specialization)==null?void 0:H.area_of_specialization)||"Not specified"}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(as,{className:"mr-2 text-blue-500"}),e.jsx("span",{className:"text-sm",children:C.languages.map(A=>A.language_name).join(", ")})]}),e.jsx("button",{onClick:()=>h(),className:"bg-blue-500 text-white hover:bg-blue-600 w-full py-2 px-4 rounded",children:"Book Appointment"})]})};return e.jsxs(te,{text:"Dashboard",children:[e.jsxs("div",{className:"container mx-auto px-4 py-8 flex flex-col",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-700",children:"Upcoming Appointments"}),e.jsx("button",{onClick:()=>h(),className:"bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded",children:"Book New Appointment"})]}),n.length>0?G(n,u,T,ee):e.jsx("p",{className:"text-gray-600",children:"No upcoming appointments."})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-blue-700 mb-4",children:"My Doctors"}),l.length>0?G(l,F,$,B):e.jsx("p",{className:"text-gray-600",children:"No doctors found."})]})]}),e.jsx(Ae,{isOpen:L,onClose:()=>j(!1),onConfirm:P}),S&&_&&e.jsx(Ws,{isOpen:S,appointment:_,onClose:R}),e.jsx(Ys,{isOpen:O,onClose:()=>I(!1),onConfirm:()=>{g&&(U(g),I(!1))}}),k&&e.jsx(Ee,{isOpen:d,preselectedDoctor:k,preselectedPatientId:t==null?void 0:t.userId,onSubmit:z,onClose:()=>o(!1),sendby:"Patient"})]})},Ks=()=>e.jsx(js,{children:e.jsx(Fe,{children:e.jsxs(Le,{children:[e.jsx(W,{path:"/",element:e.jsx(Bs,{})}),e.jsx(W,{path:"/signup",element:e.jsx(Vs,{})}),e.jsx(W,{path:"/signin",element:e.jsx(ve,{})}),e.jsx(W,{path:"/admindashboard",element:e.jsx(X,{element:e.jsx(Fs,{}),requiredRoles:["admin"]})}),e.jsx(W,{path:"/patientdashboard",element:e.jsx(X,{element:e.jsx(Zs,{}),requiredRoles:["normal_user"]})}),e.jsx(W,{path:"/doctordashboard",element:e.jsx(X,{element:e.jsx(qs,{}),requiredRoles:["doctor"]})}),e.jsx(W,{path:"/appointments",element:e.jsx(X,{element:e.jsx(je,{}),requiredRoles:["admin"]})}),e.jsx(W,{path:"/settings",element:e.jsx(X,{element:e.jsx(je,{}),requiredRoles:["admin"]})}),e.jsx(W,{path:"/doctors",element:e.jsx(X,{element:e.jsx(Es,{}),requiredRoles:["admin"]})}),e.jsx(W,{path:"/patients",element:e.jsx(X,{element:e.jsx(Ds,{}),requiredRoles:["admin"]})})]})})});Te.createRoot(document.getElementById("root")).render(e.jsx(me.StrictMode,{children:e.jsx(Ks,{})}));
